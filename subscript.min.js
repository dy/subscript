let r,e;const t=(t,a)=>(e=t,r=0,a=l(),r<e.length?n():p(a)),n=(t="Bad syntax")=>{throw Error(t+" `"+e[r]+"` at "+r)},a=(t=1,n=r)=>{if("number"==typeof t)r+=t;else for(;t(o());)r++;return e.slice(n,r)},o=(t=0)=>e.charCodeAt(r+t),s=(t=1)=>e.substr(r,t),l=(e=0,a,o,s,l=0,u,h)=>{for(;(o=t.space())&&(u=(h=i[o])&&h(s,e)||!s&&f(o));)s=u;return a&&(o!=a?n("Unclosed paren"):r++),s};t.space=e=>{for(;(e=o())<=32;)r++;return e};const u=t.token=[],f=(r,e=0,t)=>{for(;e<u.length;)if(t=u[e++](r))return t},i=[],h=t.operator=(e,n=0,o=0,u,f=e.charCodeAt(0),h=e.length,y=i[f])=>(u=o?o>0?r=>r&&[a(h),p(r)]:o<0?r=>!r&&[a(h),p(l(n-1))]:o:a=>{a=[e,p(a)];do{r+=h,a.push(p(l(n)))}while(t.space()==f&&(h<2||s(h)==e));return a},i[f]=(r,t)=>t<n&&(h<2||s(h)==e)&&u(r)||y&&y(r,t)),p=r=>Array.isArray(r)?r:(r||n()).valueOf(),y=(r,e={})=>{if("string"==typeof r)return"@"===r[0]?r.slice(1):e[r];if(Array.isArray(r)){let t=r[0],n=Array.isArray(t)?y(t,e):c[t]||e[t]||t,a=1,o=[];if(n.r){o=y(r[a++],e);do{o=n(o,y(r[a++],e))}while(a<r.length)}else{for(;a<r.length;)o.push(y(r[a++],e));o=n.apply(t,o)}return o}return r},c={},A=y.operator=(r,e)=>(c[r]=e,e.r=2==e.length);u.push((r=>(r=a((r=>r>47&&r<58||46==r)))&&((69==o()||101==o())&&(r+=a(2)+a((r=>r>=48&&r<=57))),isNaN(r=new Number(r))?n("Bad number"):r)),((r,e,t)=>34==r&&(a(),t=a((e=>e-r)),a(),"@"+t)),(r=>a((r=>r>=48&&r<=57||r>=65&&r<=90||r>=97&&r<=122||36==r||95==r||r>=192))));const g=(r,e=2,t)=>{for(let n=0;n<t.length;n+=e)r(t[n],t[n+1],t[n+2])};g(h,3,[",",1,,"|",6,,"||",4,,"&",8,,"&&",5,,"^",7,,"==",9,,"!=",9,,">",10,,">=",10,,">>",11,,">>>",11,,"<",10,,"<=",10,,"<<",11,,"+",12,,"+",15,-1,"++",15,-1,"++",16,1,"-",12,,"-",15,-1,"--",15,-1,"--",16,1,"!",15,-1,"*",13,,"/",13,,"%",13,,".",18,(r,e)=>r&&[a(),r,"@"+l(18)],"[",18,r=>(a(),[".",r,p(l(0,93))]),"]",,,"(",18,(r,e)=>(a(),e=l(0,41),Array.isArray(e)&&","===e[0]?(e[0]=r,e):e?[r,p(e)]:[r]),"(",19,(r,e)=>!r&&(a(),l(0,41)||n()),")",,,]),g(A,2,["!",r=>!r,"++",r=>++r,"--",r=>--r,".",(r,e)=>r?r[e]:r,"%",(r,e)=>r%e,"/",(r,e)=>r/e,"*",(r,e)=>r*e,"+",(r,e)=>r+(e||0),"-",(r,e)=>null==e?-r:r-e,">>>",(r,e)=>r>>>e,">>",(r,e)=>r>>e,"<<",(r,e)=>r<<e,">=",(r,e)=>r>=e,">",(r,e)=>r>e,"<=",(r,e)=>r<=e,"<",(r,e)=>r<e,"!=",(r,e)=>r!=e,"==",(r,e)=>r==e,"&",(r,e)=>r&e,"^",(r,e)=>r^e,"|",(r,e)=>r|e,"&&",(r,e)=>r&&e,"||",(r,e)=>r||e,",",(r,e)=>e]);var d=r=>(r="string"==typeof r?t(r):r,e=>y(r,e));export{d as default,y as evaluate,t as parse};