let r,e;const t=(t,o)=>(e=t,r=0,o=l(),r<e.length?n():y(o)),n=(t="Bad syntax")=>{throw Error(t+" `"+e[r]+"` at "+r)},o=(t=1,n=r)=>{if("number"==typeof t)r+=t;else for(;t(a());)r++;return e.slice(n,r)},a=(t=0)=>e.charCodeAt(r+t),s=(t=1)=>e.substr(r,t),l=(e=0,o,a,s,l=0,p,f)=>{for(;(a=t.space())&&(f=u[a]?.(s,e)||!s&&i(a));)s=f;return o&&(a!=o?n("Unclosed paren"):r++),s};t.space=e=>{for(;(e=a())<=32;)r++;return e};const p=t.token=[],i=(r,e=0,t)=>{for(;e<p.length;)if(t=p[e++](r))return t},u=[],f=t.operator=(e,n=0,p=0,i,f=e.charCodeAt(0),c=e.length,h=u[f],g=p<=0&&e.toUpperCase()!==e)=>(i=p?p>0?r=>r&&[o(c),y(r)]:p<0?r=>!r&&[o(c),y(l(n-1))]:p:o=>{o=[e,y(o)];do{r+=c,o.push(y(l(n)))}while(t.space()==f&&(c<2||s(c)==e)&&(!g||a(c)<=32));return o},u[f]=(r,t)=>t<n&&(c<2||s(c)==e)&&(!g||a(c)<=32)&&i(r)||h&&h(r,t)),y=r=>Array.isArray(r)?r:(r||n()).valueOf(),c=(r,e={},t,n)=>{if("string"==typeof r)return'"'===r[0]?r.slice(1,-1):"@"===r[0]?r.slice(1):r in e?e[r]:r;if(Array.isArray(r)&&("string"==typeof r[0]||Array.isArray(r[0]))){let[t,...n]=r,o="string"==typeof t?h[t]||e[t]:c(t,e);return n=n.map((r=>c(r,e))),o.apply(t,n)}return r},h={},g=c.operator=(r,e)=>h[r]=2==e.length?(...r)=>r.reduce(e):e;p.push((r=>(r=o((r=>r>47&&r<58||46==r)))&&((69==a()||101==a())&&(r+=o(2)+o((r=>r>=48&&r<=57))),isNaN(r=new Number(r))?n("Bad number"):r)),((r,e)=>34==r&&o()+o((e=>e-r))+o()),(r=>o((r=>r>=48&&r<=57||r>=65&&r<=90||r>=97&&r<=122||36==r||95==r||r>=192))));const A=(r,e=2,t)=>{for(let n=0;n<t.length;n+=e)r(t[n],t[n+1],t[n+2])};A(f,3,[",",1,,"|",6,,"||",4,,"&",8,,"&&",5,,"^",7,,"==",9,,"!=",9,,">",10,,">=",10,,">>",11,,">>>",11,,"<",10,,"<=",10,,"<<",11,,"+",12,,"+",15,-1,"++",15,-1,"++",16,1,"-",12,,"-",15,-1,"--",15,-1,"--",16,1,"!",15,-1,"*",13,,"/",13,,"%",13,,".",18,(r,e)=>r&&[o(),r,"string"==typeof(e=l(18))?'"'+e+'"':e.valueOf()],"[",18,r=>(o(),[".",r,y(l(0,93))]),"]",,,"(",18,(r,e)=>(o(),e=l(0,41),Array.isArray(e)&&","===e[0]?(e[0]=r,e):e?[r,y(e)]:[r]),"(",19,(r,e)=>!r&&(o(),l(0,41)||n()),")",,,]),A(g,2,["!",r=>!r,"++",r=>++r,"--",r=>--r,".",(r,e)=>r?r[e]:r,"%",(r,e)=>r%e,"/",(r,e)=>r/e,"*",(r,e)=>r*e,"+",(r,e=0)=>r+e,"-",(...r)=>r.length<2?-r:r.reduce(((r,e)=>r-e)),">>>",(r,e)=>r>>>e,">>",(r,e)=>r>>e,"<<",(r,e)=>r<<e,">=",(r,e)=>r>=e,">",(r,e)=>r>e,"<=",(r,e)=>r<=e,"<",(r,e)=>r<e,"!=",(r,e)=>r!=e,"==",(r,e)=>r==e,"&",(r,e)=>r&e,"^",(r,e)=>r^e,"|",(r,e)=>r|e,"&&",(...r)=>r.every(Boolean),"||",(...r)=>r.some(Boolean),",",(r,e)=>e]);var d=r=>(r="string"==typeof r?t(r):r,e=>c(r,e));export{d as default,c as evaluate,t as parse};