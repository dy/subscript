var e,r,t=(t,o)=>(r=t,e=0,o=c(),e<r.length?a():o),a=(t="Bad syntax")=>{throw Error(t+" `"+r[e]+"` at "+e)},o=(t=1,a=e)=>{if("number"==typeof t)e+=t;else for(;t(n());)e++;return r.slice(a,e)||s},n=(t=0)=>r.charCodeAt(e+t),s="",c=(r=0,o=t.space(),n,c=e,l=0,p,u)=>{for(;c===e&&l<t.token.length;)n=t.token[l++](o);for(;(p=i[o=t.space()])&&(u=p(o,n,r));)(n=u).indexOf(s)>=0&&a("Bad expression");return n},i=(t.space=r=>{for(;(r=n())<=32;)e++;return r},t.token=[e=>(e=o((e=>e>47&&e<58||46===e)))?((69===n()||101===n())&&(e+=o(2)+o((e=>e>=48&&e<=57))),isNaN(e=parseFloat(e))?a("Bad number"):e):s,(e,r)=>34===e?o()+o((r=>r-e))+o():s,r=>40===r?(++e,r=c(),++e,r===s?a():r):s,e=>o((e=>e>=48&&e<=57||e>=65&&e<=90||e>=97&&e<=122||36==e||95==e||e>=192&&215!=e&&247!=e))],[]);i[44]=(e,r,t)=>[o(),r,c()],i[124]=(e,r,t)=>124==n(1)&&t<1&&[o(2),r,c(1)]||t<3&&[o(),r,c(3)],i[38]=(e,r,t)=>38==n(1)&&t<2&&[o(2),r,c(2)]||t<5&&[o(),r,c(5)],i[94]=(e,r,t)=>t<4&&[o(1),r,c(4)],i[61]=i[33]=(e,r,t)=>n(1)==e&&t<6&&[o(n(1)==n(2)?3:2),r,c(6)],i[60]=i[62]=(e,r,t)=>n(1)==e&&t<8&&[o(n(2)==e?3:2),r,c(8)]||t<7&&[o(n(1)==e?2:1),r,c(7)],i[43]=i[45]=(e,r,t)=>(r===s||n(1)==e)&&t<11&&[o(n(1)==e?2:1),r===s?c(10):r]||t<9&&[o(),r,c(9)],i[33]=(e,r,t)=>r===s&&t<11&&[o(),c(10)],i[42]=i[47]=i[37]=(e,r,t)=>t<10&&[o(),r,c(10)],i[46]=i[91]=i[40]=(r,t,a,n)=>a<12&&(46==r?[o(),t,"string"==typeof(n=c(12))?'"'+n+'"':n]:91==r?(e++,t=[".",t,c()],e++,t):40==r?(e++,n=c(),e++,Array.isArray(n)&&","===n[0]?(n[0]=t,n):n===s?[t]:[t,n]):null),i[93]=i[41]=()=>{};var l=t,p=e=>Array.isArray(e)&&("string"==typeof e[0]||p(e[0])),u=(e,r={},t,a)=>p(e)?("string"==typeof(t=e[0])&&(a=f[t]),"function"!=typeof(t=a||u(t,r))?t:t.call(...e.map((e=>u(e,r))))):e&&"string"==typeof e?'"'===e[0]?e.slice(1,-1):"@"===e[0]?e.slice(1):e in r?r[e]:e:e,f=u.operator={"!":e=>!e,"++":e=>++e,"--":e=>--e,".":(...e)=>e.reduce(((e,r)=>e&&e[r])),"%":(...e)=>e.reduce(((e,r)=>e%r)),"/":(...e)=>e.reduce(((e,r)=>e/r)),"*":(...e)=>e.reduce(((e,r)=>e*r)),"+":(...e)=>e.reduce(((e,r)=>e+r)),"-":(...e)=>e.length<2?-e:e.reduce(((e,r)=>e-r)),">>>":(e,r)=>e>>>r,">>":(e,r)=>e>>r,"<<":(e,r)=>e<<r,">=":(e,r)=>e>=r,">":(e,r)=>e>r,"<=":(e,r)=>e<=r,"<":(e,r)=>e<r,"!=":(e,r)=>e!=r,"==":(e,r)=>e==r,"&":(e,r)=>e&r,"^":(e,r)=>e^r,"|":(e,r)=>e|r,"&&":(...e)=>e.every(Boolean),"||":(...e)=>e.some(Boolean),",":(...e)=>e.reduce(((e,r)=>r))},d=u,y=e=>(e="string"==typeof e?l(e):e,r=>d(e,r));export{y as default,d as evaluate,l as parse};