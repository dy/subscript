var e,r,t=e=>Array.isArray(e)&&("string"==typeof e[0]||t(e[0])),a=(e,r={},o,s)=>t(e)?("string"==typeof(o=e[0])&&(s=n[o]),"function"!=typeof(o=s||a(o,r))?o:o.call(...e.map((e=>a(e,r))))):e&&"string"==typeof e?'"'===e[0]?e.slice(1,-1):"@"===e[0]?e.slice(1):e in r?r[e]:e:e,n={},o=(a.operator=(e,r)=>n[e]=2==r.length?(...e)=>e.reduce(r):r,(t,a)=>(r=t,e=0,a=p(),e<r.length?s():d(a))),s=(t="Bad syntax")=>{throw Error(t+" `"+r[e]+"` at "+e)},l=(t=1,a=e)=>{if("number"==typeof t)e+=t;else for(;t(f());)e++;return r.slice(a,e)},f=(t=0)=>r.charCodeAt(e+t),i=(t=1)=>r.substr(e,t),p=(e=0,r,t,a,n=0,l,f)=>{for(;(t=o.space())&&(f=y[t]?.(a,e)||!a&&c(t));)a=f;return r&&t!==r&&s("Unclosed paren"),a},u=(o.space=r=>{for(;(r=f())<=32;)e++;return r},o.token=[]),c=(e,r=0,t)=>{for(;r<u.length;)if(t=u[r++](e))return t},y=[],d=(o.operator=(r,t=0,a=0,n,u=r.charCodeAt(0),c=r.length,h=y[u],g=r.toUpperCase()!==r)=>(n=a?a>0?e=>e&&[l(c),d(e)]:a<0?e=>!e&&[l(c),d(p(t-1))]:a:a=>{a=[r,a||s()];do{e+=c,a.push(d(p(t)))}while(o.space()==u&&(c<2||i(c)==r)&&(!g||f(c)<=32));return a},y[u]=(e,a)=>a<t&&(c<2||i(c)==r)&&(!g||f(c)<=32)&&n(e)||h&&h(e,a)),e=>Array.isArray(e)?e:(e||s()).valueOf()),h=10,g=15,v=e=>({valueOf:()=>e});o.token.push((e=>(e=l((e=>e>47&&e<58||46==e)))&&((69==f()||101==f())&&(e+=l(2)+l((e=>e>=48&&e<=57))),isNaN(e=new Number(e))?s("Bad number"):e)),((e,r,t,a)=>{if(34===e||39===e){for(r=i(),l(),a="";(t=f())-e;)92===t?(l(),a+=A[i()]||i()):a+=i(),l();return l(),r+a+r}}),(e=>116===e&&"true"===i(4)&&l(4)?v(!0):102===e&&"false"===i(5)&&l(5)?v(!1):110===e&&"null"===i(4)&&l(4)?v(null):117===e&&"undefined"===i(9)&&l(9)?v(void 0):null),(e=>l((e=>e>=48&&e<=57||e>=65&&e<=90||e>=97&&e<=122||36==e||95==e||e>=192&&215!=e&&247!=e))));var A={n:"\n",r:"\r",t:"\t",b:"\b",f:"\f",v:"\v"};o.space=e=>{for(;(e=f())<=32||47===e;)if(e<=32)l();else if(47===e)if(42===f(1))l(2),l((e=>42!==e&&47!==f(1))),l(2);else{if(47!==f(1))break;l(2),l((e=>e>=32))}return e};var b=(e,r=2,t)=>{for(let a=0;a<t.length;a+=r)e(t[a],t[a+1],t[a+2])};b(o.operator,3,[",",1,,"|",6,,"||",4,,"&",8,,"&&",5,,"^",7,,"==",9,,"!=",9,,">",h,,">=",h,,">>",11,,">>>",11,,"<",h,,"<=",h,,"<<",11,,"+",12,,"+",g,-1,"++",g,-1,"++",g,1,"-",12,,"-",g,-1,"--",g,-1,"--",g,1,"!",g,-1,"*",13,,"/",13,,"%",13,,".",18,(e,r)=>e&&[l(),e,"string"==typeof(r=p(18))?'"'+r+'"':r.valueOf()],"[",18,e=>(l(),e=[".",e,d(p(0,93))],l(),e),"]",,,"(",18,(e,r)=>(l(),r=p(0,41),l(),Array.isArray(r)&&","===r[0]?(r[0]=e,r):r?[e,d(r)]:[e]),"(",19,(e,r)=>!e&&(l(),r=p(0,41)||s(),l(),r),")",,,";",1,,"===",9,,"!==",9,,"**",14,,"~",g,-1,"?",3,e=>{let r,t;return e||s("Expected expression"),l(),o.space(),r=p(),58!==f()&&s("Expected :"),l(),o.space(),t=p(),["?:",e,r,t]},"}",,,":",,,"in",h,e=>f(2)<=32&&[l(2),'"'+e+'"',p(h)],"[",20,(e,r)=>!e&&(l(),r=p(0,93),l(),r?","==r[0]?(r[0]="[",r):["[",r]:["["]),"{",20,(e,r)=>!e&&(l(),r=p(0,125),l(),r?":"==r[0]?["{",r]:","==r[0]?(r[0]="{",r):["{",r]:["{"])]),b(a.operator,2,["!",e=>!e,"++",e=>++e,"--",e=>--e,".",(e,r)=>e&&e[r],"%",(e,r)=>e%r,"/",(e,r)=>e/r,"*",(e,r)=>e*r,"+",(e,r)=>e+r,"-",(...e)=>e.length<2?-e:e.reduce(((e,r)=>e-r)),">>>",(e,r)=>e>>>r,">>",(e,r)=>e>>r,"<<",(e,r)=>e<<r,">=",(e,r)=>e>=r,">",(e,r)=>e>r,"<=",(e,r)=>e<=r,"<",(e,r)=>e<r,"!=",(e,r)=>e!=r,"==",(e,r)=>e==r,"&",(e,r)=>e&r,"^",(e,r)=>e^r,"|",(e,r)=>e|r,"&&",(...e)=>e.every(Boolean),"||",(...e)=>e.some(Boolean),",",(e,r)=>r,"**",(...e)=>e.reduceRight(((e,r)=>Math.pow(r,e))),"~",e=>~e,"?:",(e,r,t)=>e?r:t,"in",(e,r)=>e in r,"[",(...e)=>Array(...e),"{",(...e)=>Object.fromEntries(e),":",(e,r)=>[e,r]]);var m=e=>(e="string"==typeof e?o(e):e,r=>a(e,r));export{m as default,a as evaluate,o as parse};