var e,r,t=(t,o)=>(r=t,e=0,o=f(),e<r.length?a():o),a=(t="Bad syntax")=>{throw Error(t+" `"+r[e]+"` at "+e)},o=(t=1,a=e)=>{if("number"==typeof t)e+=t;else for(;t(n());)e++;return r.slice(a,e)||s},n=(t=0)=>r.charCodeAt(e+t),s="",f=(r=0,o=t.space(),n,f=e,p=0,i,c)=>{for(;f===e&&p<t.token.length;)n=t.token[p++](o);for(;(o=t.space())&&(i=u[o]||a())&&(c=i(o,n,r));)(n=c).indexOf(s)>=0&&a();return n},u=(t.space=r=>{for(;(r=n())<=32;)e++;return r},t.token=[e=>(e=o((e=>e>47&&e<58||46===e)))?((69===n()||101===n())&&(e+=o(2)+o((e=>e>=48&&e<=57))),isNaN(e=parseFloat(e))?a("Bad number"):e):s,(e,r)=>34===e?o()+o((r=>r-e))+o():s,r=>40===r?(++e,r=f(),++e,r===s?a():r):s,e=>o((e=>e>=48&&e<=57||e>=65&&e<=90||e>=97&&e<=122||36==e||95==e||e>=192&&215!=e&&247!=e))],[]),p=(r,a=0,n=1,s=u[r])=>u[r]=(r,u,p,i,c,l)=>{if(p<a&&(i="number"==typeof n?n:n(u))){if("number"==typeof i)for(c=[l=o(i|=0),u,f(a)];t.space()==r&&(o(i)==l||(e-=i,0));)c.push(f(a));else c=i;return c}if(s)return s(r,u,p)};p(44,1),p(124,6),p(124,4,(e=>124==n(1)&&2)),p(38,8),p(38,5,(e=>38==n(1)&&2)),p(94,7),p(61,9,(e=>n(1)==n(2)?3:2)),p(33,9,(e=>n(1)==n(2)?3:2)),p(62,10,(e=>61==n(1)?2:1)),p(62,11,(e=>62==n(1)&&(n(2)===n(1)?3:2))),p(60,10,(e=>61==n(1)?2:1)),p(60,11,(e=>60==n(1)&&2)),p(43,12),p(45,12),p(43,15,(e=>(e===s||43==n(1))&&[o(43==n(1)?2:1),e===s?f(14):e])),p(45,15,(e=>(e===s||45==n(1))&&[o(45==n(1)?2:1),e===s?f(14):e])),p(33,15,(e=>e===s&&[o(1),f(14)])),p(42,13),p(47,13),p(37,13),p(46,18,((e,r)=>[o(),e,"string"==typeof(r=f(18))?'"'+r+'"':r])),p(91,18,(r=>(e++,r=[".",r,f()],e++,r))),p(40,18,((r,t)=>(e++,t=f(),e++,Array.isArray(t)&&","===t[0]?(t[0]=r,t):t===s?[r]:[r,t]))),p(93),p(41);var i=t,c=e=>Array.isArray(e)&&("string"==typeof e[0]||c(e[0])),l=(e,r={},t,a)=>c(e)?("string"==typeof(t=e[0])&&(a=y[t]),"function"!=typeof(t=a||l(t,r))?t:t.call(...e.map((e=>l(e,r))))):e&&"string"==typeof e?'"'===e[0]?e.slice(1,-1):"@"===e[0]?e.slice(1):e in r?r[e]:e:e,y=l.operator={"!":e=>!e,"++":e=>++e,"--":e=>--e,".":(...e)=>e.reduce(((e,r)=>e&&e[r])),"%":(...e)=>e.reduce(((e,r)=>e%r)),"/":(...e)=>e.reduce(((e,r)=>e/r)),"*":(...e)=>e.reduce(((e,r)=>e*r)),"+":(...e)=>e.reduce(((e,r)=>e+r)),"-":(...e)=>e.length<2?-e:e.reduce(((e,r)=>e-r)),">>>":(e,r)=>e>>>r,">>":(e,r)=>e>>r,"<<":(e,r)=>e<<r,">=":(e,r)=>e>=r,">":(e,r)=>e>r,"<=":(e,r)=>e<=r,"<":(e,r)=>e<r,"!=":(e,r)=>e!=r,"==":(e,r)=>e==r,"&":(e,r)=>e&r,"^":(e,r)=>e^r,"|":(e,r)=>e|r,"&&":(...e)=>e.every(Boolean),"||":(...e)=>e.some(Boolean),",":(...e)=>e.reduce(((e,r)=>r))},d=l,g=e=>(e="string"==typeof e?i(e):e,r=>d(e,r));export{g as default,d as evaluate,i as parse};