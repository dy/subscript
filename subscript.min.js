let t,e,r=r=>(t=0,e=r,!(r=s())||e[t]?l():r),l=(r="Bad syntax",l=e[t])=>{throw SyntaxError(r+" `"+l+"` at "+t)},a=(r=1,l=t,a)=>{if("number"==typeof r)t+=r;else for(;a=r(e.charCodeAt(t));)t+=a;return e.slice(l,t)},s=(e=0,r,a,s,o,c)=>{for(;(a=n())&&(o=(c=h[a])&&c(s,e)||!s&&h[0]());)s=o;return r&&(a==r?t++:l()),s},n=r=>{for(;(r=e.charCodeAt(t))<=32;)t++;return r},o=t=>t>=48&&t<=57||t>=65&&t<=90||t>=97&&t<=122||36==t||95==t||t>=192&&215!=t&&247!=t,h=[t=>a(o)];r.set=(r,l=32,a,s=r.charCodeAt(0),n=r.length,c=h[s],f=r.toUpperCase()!==r)=>h[s]=(s,h,i=t)=>h<l&&(n<2||e.substr(t,n)==r)&&(!f||!o(e.charCodeAt(t+n)))&&(t+=n,a(s,h))||(t=i,c&&c(s,h));const c=t=>Array.isArray(t)?f[t[0]](...t.slice(1)):e=>e[t];c.set=(t,e,r=f[t])=>f[t]=(...t)=>e(...t)||r&&r(...t);const f={},i=t=>(t=t.trim())?(t=r(t.trim()),e=>(t.call?t:t=c(t))(e)):()=>{},p=i.set=(t,e,l,a=e<0,n=l[0],o=l[1],f=!n&&l.length)=>(n||=f?f>1?(r,l)=>r&&(l=s(e-a))&&[t,r,l]:r=>!r&&(r=s(e-1))&&[t,r]:(r,l)=>r&&(l=s(e))&&(r[0]===t&&r[2]?(r.push(l),r):[t,r,l]),o||=f?f>1?(t,e)=>e&&(t=c(t),e=c(e),t.length||e.length?r=>l(t(r),e(r)):(t=l(t(),e()),()=>t)):(t,e)=>!e&&((t=c(t)).length?e=>l(t(e)):(t=l(t()),()=>t)):(...t)=>(t=t.map(c),e=>l(...t.map((t=>t(e))))),(e=a?-e:e)?r.set(t,e,n):h[t.charCodeAt(0)||1]=n,c.set(t,o)),u=t=>t?l():["",(t=+a((t=>46===t||t>=48&&t<=57||(69===t||101===t?2:0))))!=t?l():t],g=(t,e,r,l)=>[t,e,[r=>r?["++"===t?"-":"+",[t,r],["",1]]:[t,s(e-1)],l=(t,e)=>"("===t[0]?l(t[1]):"."===t[0]?(e=t[2],t=c(t[1]),l=>r(t(l),e)):"["===t[0]?([,t,e]=t,t=c(t),e=c(e),l=>r(t(l),e(l))):e=>r(e,t)]],d=["",,[,t=>()=>t],'"',,[t=>t?l():["",(a()+a((t=>t-34?1:0))+(a()||l("Bad string"))).slice(1,-1)]],".",,[t=>!t&&u()],...Array(10).fill(0).flatMap(((t,e)=>[""+e,0,[u]])),",",1,(...t)=>t[t.length-1],"||",4,(...t)=>{let e,r=0;for(;!e&&r<t.length;)e=t[r++];return e},"&&",5,(...t)=>{let e=0,r=!0;for(;r&&e<t.length;)r=t[e++];return r},"+",12,(t,e)=>t+e,"-",12,(t,e)=>t-e,"*",13,(t,e)=>t*e,"/",13,(t,e)=>t/e,"%",13,(t,e)=>t%e,"|",6,(t,e)=>t|e,"&",8,(t,e)=>t&e,"^",7,(t,e)=>t^e,"==",9,(t,e)=>t==e,"!=",9,(t,e)=>t!=e,">",10,(t,e)=>t>e,">=",10,(t,e)=>t>=e,"<",10,(t,e)=>t<e,"<=",10,(t,e)=>t<=e,">>",11,(t,e)=>t>>e,">>>",11,(t,e)=>t>>>e,"<<",11,(t,e)=>t<<e,"+",15,t=>+t,"-",15,t=>-t,"!",15,t=>!t,"~",15,t=>~t,...g("++",15,((t,e)=>++t[e])),...g("--",15,((t,e)=>--t[e])),"[",18,[t=>t&&["[",t,s(0,93)||l()],(t,e)=>e&&(t=c(t),e=c(e),r=>t(r)[e(r)])],".",18,[(t,e)=>t&&(e=s(18))&&[".",t,e],(t,e)=>(t=c(t),e=e[0]?e:e[1],r=>t(r)[e])],"(",18,[t=>!t&&["(",s(0,41)||l()],c],"(",18,[t=>t&&["(",t,s(0,41)||""],(t,e,r,l)=>null!=e&&(l=""==e?()=>[]:","===e[0]?(e=e.slice(1).map(c),t=>e.map((e=>e(t)))):(e=c(e),t=>[e(t)]),"."===t[0]?(r=t[2],t=c(t[1]),e=>t(e)[r](...l(e))):"["===t[0]?(r=c(t[2]),t=c(t[1]),e=>t(e)[r(e)](...l(e))):(t=c(t),e=>t(e)(...l(e))))]];for(;d[2];)p(...d.splice(0,3));export{c as compile,i as default,r as parse};