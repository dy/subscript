var e,r,t,l,n=(l,n)=>(r=l,e=t=0,n=y(),e<r.length?u():n),o=()=>r.charCodeAt(e),a=(t=1)=>r.substr(e,t),u=(r=a())=>{throw Error("Bad syntax "+r+" at "+e)},s=(t=1,l=e)=>{if("number"==typeof t)e+=t;else for(;t(o());)++e>r.length&&u(t);return e>l?r.slice(l,e):null},f=()=>{for(;o()<=32;)e++},i=(r,l,n,o=3)=>{if(e&&t&&t[3]===e)return t;for(;o;)if(null!=(n=r[l=a(o--)]))return t=[l,n,l.length,e]},y=(r=-1,t)=>{f();let n,s,p,d,b=o(),m=0,v=e;if(b!==l){for(t&&(d=l,l=t);v===e&&m<c.length;)s=c[m++](b);if(v===e)(n=i(g))&&(e+=n[2],s=[n[0],y(n[1])]);else for(f(),b=o(),m=0;m<h.length;)(p=h[m](s,b))!==s?(s=p,f(),b=o()):m++;for(;b=o()&&b!==l&&(n=i(A))&&n[1]>r;){s=[n[0],s];do{e+=n[2],s.push(y(n[1]))}while(a(n[2])===n[0]);f()}return t&&(l=o()!==t?u():d),s}},p=e=>s((e=>e>=48&&e<=57||e>=65&&e<=90||e>=97&&e<=122||36==e||95==e||e>=192)),c=n.token=[e=>{if(e=s((e=>e>=48&&e<=57||46===e)))return(69===o()||101===o())&&(e+=s(2)+s((e=>e>=48&&e<=57))),isNaN(e=parseFloat(e))?u():e},(r,t)=>40===r?(e++,t=y(-1,41),e++,t):null,(r,t)=>34===r?(t=a(),e++,t+s((e=>e-r))+(e++,t)):null,p],d=n.literal={true:!0,false:!1,null:null},h=n.postfix=[(t,l,n)=>(46===l?(e++,f(),t=[".",t,'"'+p()+'"']):91===l?(e++,t=[".",t,y(-1,93)],e++):40===l?(e++,n=y(-1,41),t=Array.isArray(n)&&","===n[0]?(n[0]=t,n):null==n?[t]:[t,n],e++):43!==l&&45!==l||r.charCodeAt(e+1)!==l?"string"==typeof t&&d.hasOwnProperty(t)&&(t=d[t]):t=[s(2),t],t)],g=n.unary={"-":17,"!":17,"+":17,"++":17,"--":17},A=n.binary={",":1,"||":6,"&&":7,"|":8,"^":9,"&":10,"==":11,"!=":11,"<":12,">":12,"<=":12,">=":12,"<<":13,">>":13,">>>":13,"+":14,"-":14,"*":15,"/":15,"%":15},b=n,m=e=>Array.isArray(e)&&("string"==typeof e[0]||m(e[0])),v=(e,r={},t,l)=>m(e)?("string"==typeof(t=e[0])&&(l=w[t]),"function"!=typeof(t=l||v(t,r))?t:t.call(...e.map((e=>v(e,r))))):e&&"string"==typeof e?'"'===e[0]?e.slice(1,-1):"@"===e[0]?e.slice(1):e in r?r[e]:e:e,w=v.operator={"!":e=>!e,"++":e=>++e,"--":e=>--e,".":(...e)=>e.reduce(((e,r)=>e&&e[r])),"%":(...e)=>e.reduce(((e,r)=>e%r)),"/":(...e)=>e.reduce(((e,r)=>e/r)),"*":(...e)=>e.reduce(((e,r)=>e*r)),"+":(...e)=>e.reduce(((e,r)=>e+r)),"-":(...e)=>e.length<2?-e:e.reduce(((e,r)=>e-r)),">>>":(e,r)=>e>>>r,">>":(e,r)=>e>>r,"<<":(e,r)=>e<<r,">=":(e,r)=>e>=r,">":(e,r)=>e>r,"<=":(e,r)=>e<=r,"<":(e,r)=>e<r,"!=":(e,r)=>e!=r,"==":(e,r)=>e==r,"&":(e,r)=>e&r,"^":(e,r)=>e^r,"|":(e,r)=>e|r,"&&":(...e)=>e.every(Boolean),"||":(...e)=>e.some(Boolean),",":(...e)=>e.reduce(((e,r)=>r))},x=v,B=e=>(e="string"==typeof e?b(e):e,r=>x(e,r));export{B as default,x as evaluate,b as parse};