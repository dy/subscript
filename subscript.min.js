let t,e,r=r=>(t=0,e=r,r=a(),e[t]?o():r||""),o=(r="Bad syntax",o=e.slice(0,t).split("\n"),s=o.pop())=>{let a=e.slice(t-108,t).split("\n").pop(),n=e.slice(t,t+108).split("\n").shift();throw EvalError(`${r} at ${o.length}:${s.length} \`${t>=108?"…":""}${a}▶${n}\``,"font-weight: bold")},s=(r=1,o=t,s)=>{if("number"==typeof r)t+=r;else for(;s=r(e.charCodeAt(t));)t+=s;return e.slice(o,t)},a=(e=0,s,a,n,l,c)=>{for(;(a=r.space())&&(l=((c=p[a])&&c(n,e))??(!n&&r.id()));)n=l;return s&&(a==s?t++:o()),n},n=t=>t>=48&&t<=57||t>=65&&t<=90||t>=97&&t<=122||36==t||95==t||t>=192&&215!=t&&247!=t;r.id=()=>s(n),r.space=r=>{for(;(r=e.charCodeAt(t))<=32;)t++;return r};let p=[],l=(r,o=32,s,a=r.charCodeAt(0),l=r.length,c=p[a],i=r.toUpperCase()!==r)=>p[a]=(a,p,d=t)=>p<o&&(l<2||e.substr(t,l)==r)&&(!i||!n(e.charCodeAt(t+l)))&&(t+=l,s(a,p))||(t=d,c?.(a,p)),c=(t,e,r=!1)=>l(t,e,((o,s)=>o&&(s=a(e-(r?.5:0)))&&[t,o,s])),i=(t,e,r)=>l(t,e,(o=>r?o&&[t,o]:!o&&(o=a(e-.5))&&[t,o])),d=(t,e)=>{l(t,e,((r,o)=>(o=a(e),(!r||r[0]!==t)&&(r=[t,r]),r.push(o),r)))},f=(t,e)=>l(t[0],e,(e=>!e&&[t,a(0,t.charCodeAt(1))])),h=(t,e)=>l(t[0],e,(e=>e&&[t[0],e,a(0,t.charCodeAt(1))]));const u=t=>t?o():[,(t=+s((t=>46===t||t>=48&&t<=57||(69===t||101===t?2:0))))!=t?o():t];p[46]=t=>!t&&u();for(let t=48;t<=57;t++)p[t]=u;const A={n:"\n",r:"\r",t:"\t",b:"\b",f:"\f",v:"\v"},C=r=>(a,n,p="")=>{for(a&&o("Unexpected string"),s();(n=e.charCodeAt(t))-r;)92===n?(s(),n=s(),p+=A[n]||n):p+=s();return s()||o("Bad string"),[,p]};p[34]=C(34),p[39]=C(39);const g=t=>Array.isArray(t)?t[0]?m[t[0]](...t.slice(1)):()=>t[1]:g.id(t);g.id=t=>e=>e?.[t];const m={},y=(t,e,r=m[t])=>m[t]=(...t)=>e(...t)||r&&r(...t),$=(t,e,r,s,a)=>"()"===t[0]?$(t[1],e,r):"string"==typeof t?r=>e(r,t,r):"."===t[0]?(s=g(t[1]),a=t[2],t=>e(s(t),a,t)):"["===t[0]?(s=g(t[1]),a=g(t[2]),t=>e(s(t),a(t),t)):r?(t=g(t),r=>e([t(r)],0,r)):()=>o("Bad left value");h("()",17),y("(",((t,e,r)=>(r=e?","===e[0]?(e=e.slice(1).map((t=>t?g(t):err())),t=>e.map((e=>e(t)))):(e=g(e),t=>[e(t)]):()=>[],$(t,((t,e,o)=>t[e](...r(o))),!0)))),h("[]",17),y("[",((t,e)=>e?(t=g(t),e=g(e),r=>t(r)[e(r)]):err())),c(".",17),y(".",((t,e)=>(t=g(t),e=e[0]?e:e[1],r=>t(r)[e]))),f("()",17),y("()",(t=>(!t&&o("Empty ()"),g(t))));const b=(...t)=>(t=t.map(g),e=>t.map((t=>t(e))).pop());d(",",1),y(",",b),d(";",1),y(";",b),c("*",12),y("*",((t,e)=>e&&(t=g(t),e=g(e),r=>t(r)*e(r)))),c("/",12),y("/",((t,e)=>e&&(t=g(t),e=g(e),r=>t(r)/e(r)))),c("%",12),y("%",((t,e)=>e&&(t=g(t),e=g(e),r=>t(r)%e(r)))),c("*=",2,!0),y("*=",((t,e)=>(e=g(e),$(t,((t,r,o)=>t[r]*=e(o)))))),c("/=",2,!0),y("/=",((t,e)=>(e=g(e),$(t,((t,r,o)=>t[r]/=e(o)))))),c("%=",2,!0),y("%=",((t,e)=>(e=g(e),$(t,((t,r,o)=>t[r]%=e(o)))))),i("+",14),y("+",((t,e)=>!e&&(t=g(t),e=>+t(e)))),i("-",14),y("-",((t,e)=>!e&&(t=g(t),e=>-t(e)))),c("+",11),y("+",((t,e)=>e&&(t=g(t),e=g(e),r=>t(r)+e(r)))),c("-",11),y("-",((t,e)=>e&&(t=g(t),e=g(e),r=>t(r)-e(r)))),c("+=",2,!0),y("+=",((t,e)=>(e=g(e),$(t,((t,r,o)=>t[r]+=e(o)))))),c("-=",2,!0),y("-=",((t,e)=>(e=g(e),$(t,((t,r,o)=>t[r]-=e(o)))))),l("++",15,(t=>t?["++-",t]:["++",a(14)])),y("++",(t=>$(t,((t,e,r)=>++t[e])))),y("++-",(t=>$(t,((t,e,r)=>t[e]++)))),l("--",15,(t=>t?["--+",t]:["--",a(14)])),y("--",(t=>$(t,((t,e,r)=>--t[e])))),y("--+",(t=>$(t,((t,e,r)=>t[e]--)))),i("~",14),y("~",((t,e)=>!e&&(t=g(t),e=>~t(e)))),c("|",5),y("|",((t,e)=>e&&(t=g(t),e=g(e),r=>t(r)|e(r)))),c("&",7),y("&",((t,e)=>e&&(t=g(t),e=g(e),r=>t(r)&e(r)))),c("^",6),y("^",((t,e)=>e&&(t=g(t),e=g(e),r=>t(r)^e(r)))),c(">>",10),y(">>",((t,e)=>e&&(t=g(t),e=g(e),r=>t(r)>>e(r)))),c("<<",10),y("<<",((t,e)=>e&&(t=g(t),e=g(e),r=>t(r)<<e(r)))),c("==",8),y("==",((t,e)=>e&&(t=g(t),e=g(e),r=>t(r)==e(r)))),c("!=",8),y("!=",((t,e)=>e&&(t=g(t),e=g(e),r=>t(r)!=e(r)))),c(">",9),y(">",((t,e)=>e&&(t=g(t),e=g(e),r=>t(r)>e(r)))),c("<",9),y("<",((t,e)=>e&&(t=g(t),e=g(e),r=>t(r)<e(r)))),c(">=",9),y(">=",((t,e)=>e&&(t=g(t),e=g(e),r=>t(r)>=e(r)))),c("<=",9),y("<=",((t,e)=>e&&(t=g(t),e=g(e),r=>t(r)<=e(r)))),i("!",14),y("!",((t,e)=>!e&&(t=g(t),e=>!t(e)))),c("||",3),y("||",((t,e)=>(t=g(t),e=g(e),r=>t(r)||e(r)))),c("&&",4),y("&&",((t,e)=>(t=g(t),e=g(e),r=>t(r)&&e(r)))),c("=",2,!0),y("=",((t,e)=>(e=g(e),$(t,((t,r,o)=>t[r]=e(o))))));var v=t=>g(r(t));export{h as access,c as binary,g as compile,v as default,f as group,p as lookup,d as nary,y as operator,r as parse,$ as prop,l as token,i as unary};