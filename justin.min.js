let r,e,t=t=>(r=0,e=t,t=s(),e[r]?a():t||""),a=(t="Bad syntax",a=e.slice(0,r).split("\n"),p=a.pop())=>{let s=e.slice(r-108,r).split("\n").pop(),o=e.slice(r,r+108).split("\n").shift();throw EvalError(`${t} at ${a.length}:${p.length} \`${r>=108?"…":""}${s}▶${o}\``,"font-weight: bold")},p=(t=1,a=r,p)=>{if("number"==typeof t)r+=t;else for(;p=t(e.charCodeAt(r));)r+=p;return e.slice(a,r)},s=(e=0,p,s,o,n,l)=>{for(;(s=t.space())&&(n=((l=i[s])&&l(o,e))??(!o&&t.id()));)o=n;return p&&(s==p?r++:a()),o},o=r=>r>=48&&r<=57||r>=65&&r<=90||r>=97&&r<=122||36==r||95==r||r>=192&&215!=r&&247!=r;t.id=()=>p(o),t.space=t=>{for(;(t=e.charCodeAt(r))<=32;)r++;return t};let i=[],n=(t,a=32,p,s=t.charCodeAt(0),n=t.length,l=i[s],c=t.toUpperCase()!==t)=>i[s]=(s,i,d=r)=>i<a&&(n<2||e.substr(r,n)==t)&&(!c||!o(e.charCodeAt(r+n)))&&(r+=n,p(s,i))||(r=d,l?.(s,i)),l=(r,e,t=!1)=>n(r,e,((a,p)=>a&&(p=s(e-(t?.5:0)))&&[r,a,p])),c=(r,e,t)=>n(r,e,(a=>t?a&&[r,a]:!a&&(a=s(e-.5))&&[r,a])),d=(r,e)=>{n(r,e,((t,a)=>(a=s(e),(!t||t[0]!==r)&&(t=[r,t]),t.push(a),t)))},f=(r,e)=>n(r[0],e,(e=>!e&&[r,s(0,r.charCodeAt(1))])),m=(r,e)=>n(r[0],e,(e=>e&&[r[0],e,s(0,r.charCodeAt(1))]));const h=r=>Array.isArray(r)?r[0]?u[r[0]](...r.slice(1)):()=>r[1]:h.id(r);h.id=r=>e=>e?.[r];const u={},A=(r,e,t=u[r])=>u[r]=(...r)=>e(...r)||t&&t(...r),y=(r,e,t,p,s)=>"()"===r[0]?y(r[1],e,t):"string"==typeof r?t=>e(t,r,t):"."===r[0]?(p=h(r[1]),s=r[2],r=>e(p(r),s,r)):"["===r[0]?(p=h(r[1]),s=h(r[2]),r=>e(p(r),s(r),r)):t?(r=h(r),t=>e([r(t)],0,t)):()=>a("Bad left value"),b=r=>r?a():[,(r=+p((r=>46===r||r>=48&&r<=57||(69===r||101===r?2:0))))!=r?a():r];i[46]=r=>!r&&b();for(let r=48;r<=57;r++)i[r]=b;const C={n:"\n",r:"\r",t:"\t",b:"\b",f:"\f",v:"\v"},g=t=>(s,o,i="")=>{for(s&&a("Unexpected string"),p();(o=e.charCodeAt(r))-t;)92===o?(p(),o=p(),i+=C[o]||o):i+=p();return p()||a("Bad string"),[,i]};i[34]=g(34),i[39]=g(39),m("()",17),A("(",((r,e,t)=>(t=e?","===e[0]?(e=e.slice(1).map((r=>r?h(r):err())),r=>e.map((e=>e(r)))):(e=h(e),r=>[e(r)]):()=>[],y(r,((r,e,a)=>r[e](...t(a))),!0)))),m("[]",17),A("[",((r,e)=>e?(r=h(r),e=h(e),t=>r(t)[e(t)]):err())),l(".",17),A(".",((r,e)=>(r=h(r),e=e[0]?e:e[1],t=>r(t)[e]))),f("()",17),A("()",(r=>(!r&&a("Empty ()"),h(r))));const v=(...r)=>(r=r.map(h),e=>r.map((r=>r(e))).pop());d(",",1),A(",",v),d(";",1),A(";",v),l("*",12),A("*",((r,e)=>e&&(r=h(r),e=h(e),t=>r(t)*e(t)))),l("/",12),A("/",((r,e)=>e&&(r=h(r),e=h(e),t=>r(t)/e(t)))),l("%",12),A("%",((r,e)=>e&&(r=h(r),e=h(e),t=>r(t)%e(t)))),l("*=",2,!0),A("*=",((r,e)=>(e=h(e),y(r,((r,t,a)=>r[t]*=e(a)))))),l("/=",2,!0),A("/=",((r,e)=>(e=h(e),y(r,((r,t,a)=>r[t]/=e(a)))))),l("%=",2,!0),A("%=",((r,e)=>(e=h(e),y(r,((r,t,a)=>r[t]%=e(a)))))),c("+",14),A("+",((r,e)=>!e&&(r=h(r),e=>+r(e)))),c("-",14),A("-",((r,e)=>!e&&(r=h(r),e=>-r(e)))),l("+",11),A("+",((r,e)=>e&&(r=h(r),e=h(e),t=>r(t)+e(t)))),l("-",11),A("-",((r,e)=>e&&(r=h(r),e=h(e),t=>r(t)-e(t)))),l("+=",2,!0),A("+=",((r,e)=>(e=h(e),y(r,((r,t,a)=>r[t]+=e(a)))))),l("-=",2,!0),A("-=",((r,e)=>(e=h(e),y(r,((r,t,a)=>r[t]-=e(a)))))),n("++",15,(r=>r?["++-",r]:["++",s(14)])),A("++",(r=>y(r,((r,e,t)=>++r[e])))),A("++-",(r=>y(r,((r,e,t)=>r[e]++)))),n("--",15,(r=>r?["--+",r]:["--",s(14)])),A("--",(r=>y(r,((r,e,t)=>--r[e])))),A("--+",(r=>y(r,((r,e,t)=>r[e]--)))),c("~",14),A("~",((r,e)=>!e&&(r=h(r),e=>~r(e)))),l("|",5),A("|",((r,e)=>e&&(r=h(r),e=h(e),t=>r(t)|e(t)))),l("&",7),A("&",((r,e)=>e&&(r=h(r),e=h(e),t=>r(t)&e(t)))),l("^",6),A("^",((r,e)=>e&&(r=h(r),e=h(e),t=>r(t)^e(t)))),l(">>",10),A(">>",((r,e)=>e&&(r=h(r),e=h(e),t=>r(t)>>e(t)))),l("<<",10),A("<<",((r,e)=>e&&(r=h(r),e=h(e),t=>r(t)<<e(t)))),l("==",8),A("==",((r,e)=>e&&(r=h(r),e=h(e),t=>r(t)==e(t)))),l("!=",8),A("!=",((r,e)=>e&&(r=h(r),e=h(e),t=>r(t)!=e(t)))),l(">",9),A(">",((r,e)=>e&&(r=h(r),e=h(e),t=>r(t)>e(t)))),l("<",9),A("<",((r,e)=>e&&(r=h(r),e=h(e),t=>r(t)<e(t)))),l(">=",9),A(">=",((r,e)=>e&&(r=h(r),e=h(e),t=>r(t)>=e(t)))),l("<=",9),A("<=",((r,e)=>e&&(r=h(r),e=h(e),t=>r(t)<=e(t)))),c("!",14),A("!",((r,e)=>!e&&(r=h(r),e=>!r(e)))),l("||",3),A("||",((r,e)=>(r=h(r),e=h(e),t=>r(t)||e(t)))),l("&&",4),A("&&",((r,e)=>(r=h(r),e=h(e),t=>r(t)&&e(t)))),l("=",2,!0),A("=",((r,e)=>(e=h(e),y(r,((r,t,a)=>r[t]=e(a))))));var $=r=>h(t(r));n("/*",20,((t,a)=>(p((t=>42!==t&&47!==e.charCodeAt(r+1))),p(2),t||s(a)||[]))),n("//",20,((r,e)=>(p((r=>r>=32)),r||s(e)||[""]))),l("**",13,!0),A("**",((r,e)=>e&&(r=h(r),e=h(e),t=>r(t)**e(t)))),n("?",2,((r,e,t)=>r&&(e=s(2,58))&&["?",r,e,s(3)])),A("?",((r,e,t)=>(r=h(r),e=h(e),t=h(t),a=>r(a)?e(a):t(a)))),n("true",20,(r=>r?err():[,!0])),n("false",20,(r=>r?err():[,!1])),f("[]",20),A("[]",((r,e)=>r?","===r[0]?(r=r.slice(1).map(h),e=>r.map((r=>r(e)))):(r=h(r),e=>[r(e)]):()=>[])),f("{}",20),A("{}",((r,e)=>r?","===r[0]?(r=r.slice(1).map(h),e=>Object.fromEntries(r.map((r=>r(e))))):":"===r[0]?(r=h(r),e=>Object.fromEntries([r(e)])):(e=h(r),t=>({[r]:e(t)})):()=>({}))),l(":",2,!0),A(":",((r,e)=>(e=h(e),r=Array.isArray(r)?h(r):(r=>r).bind(0,r),t=>[r(t),e(t)]))),l("=>",2,!0),A("=>",((r,e)=>(r=(r="()"===r[0]?r[1]:r)?r=","===r[0]?r.slice(1):[r]:[],e=h("{}"===e[0]?e[1]:e),(t=null)=>(t=Object.create(t),(...a)=>(r.map(((r,e)=>t[r]=a[e])),e(t)))))),l(""),n("?.",17,(r=>r&&["?.",r])),A("?.",(r=>(r=h(r),e=>r(e)||(()=>{})))),n("?.",17,((r,e)=>r&&!(e=s(17))?.map&&["?.",r,e])),A("?.",((r,e)=>e&&(r=h(r),t=>r(t)?.[e]))),A("(",((r,e,t,a,p,s)=>"?."===r[0]&&(r[2]||Array.isArray(r[1]))&&(a=e?","===e[0]?(e=e.slice(1).map(h),r=>e.map((e=>e(r)))):(e=h(e),r=>[e(r)]):()=>[],!r[2]&&(r=r[1]),p="["===r[0]?h(r[2]):()=>r[2],t=h(r[1]),r=>t(r)?.[p(r)]?.(...a(r))))),l("in",9),A("in",((r,e)=>e&&(r=h(r),e=h(e),t=>r(t)in e(t)))),l("===",8),l("!==",9),A("===",((r,e)=>(r=h(r),e=h(e),t=>r(t)===e(t)))),A("===",((r,e)=>(r=h(r),e=h(e),t=>r(t)!==e(t)))),l("??",3),A("??",((r,e)=>e&&(r=h(r),e=h(e),t=>r(t)??e(t)))),l("??=",2,!0),A("??=",((r,e)=>(e=h(e),prop(r,((r,t,a)=>r[t]??=e(a)))))),l("||=",2,!0),A("||=",((r,e)=>(e=h(e),prop(r,((r,t,a)=>r[t]||=e(a)))))),l("&&=",2,!0),A("&&=",((r,e)=>(e=h(e),prop(r,((r,t,a)=>r[t]&&=e(a)))))),n("undefined",20,(r=>r?a():[,void 0])),n("NaN",20,(r=>r?a():[,NaN])),n("null",20,(r=>r?a():[,null]));export{m as access,l as binary,h as compile,$ as default,f as group,i as lookup,d as nary,A as operator,t as parse,y as prop,n as token,c as unary};