var e,r,t,l=(l,n)=>(r=l,e=t=0,n=i(),e<r.length?a():n),n=()=>r.charCodeAt(e),o=(t=1)=>r.substr(e,t),a=(r=o())=>{throw Error("Bad syntax "+r+" at "+e)},u=(t=1,l=e)=>{if("number"==typeof t)e+=t;else for(;t(n());)++e>r.length&&a(t);return e>l?r.slice(l,e):null},s=()=>{for(;n()<=32;)e++},f=(r,l,n,a=3)=>{if(e&&t&&t[3]===e)return t;for(;a;)if(null!=(n=r[l=o(a--)]))return t=[l,n,l.length,e]},i=(r,t=-1)=>{s();let l,a,u,y=n(),c=0,A=e;if(y!==r){for(;A===e&&c<p.length;)a=p[c++](y);if(A===e)(l=f(h))&&(e+=l[2],a=[l[0],i(r,l[1])]);else for(s(),y=n(),c=0;c<d.length;)(u=d[c](a,y))!==a?(a=u,s(),y=n()):c++;for(;y=n()&&y!==r&&(l=f(g))&&l[1]>t;){a=[l[0],a];do{e+=l[2],a.push(i(r,l[1]))}while(o(l[2])===l[0]);s()}return a}},y=e=>u((e=>e>=48&&e<=57||e>=65&&e<=90||e>=97&&e<=122||36==e||95==e||e>=192)),p=l.token=[e=>{if(e=u((e=>e>=48&&e<=57||46===e)))return(69===n()||101===n())&&(e+=u(2)+u((e=>e>=48&&e<=57))),isNaN(e=parseFloat(e))?a():e},(r,t)=>40===r?(e++,t=i(41),e++,t):null,(r,t)=>34===r?(t=o(),e++,t+u((e=>e-r))+(e++,t)):null,y],c=l.literal={true:!0,false:!1,null:null},d=l.postfix=[(t,l,o)=>(46===l?(e++,s(),t=[".",t,'"'+y()+'"']):91===l?(e++,t=[".",t,i(93)],e++):40===l?(e++,o=i(41),41!==n()&&a(),t=Array.isArray(o)&&","===o[0]?(o[0]=t,o):null==o?[t]:[t,o],e++):43!==l&&45!==l||r.charCodeAt(e+1)!==l?"string"==typeof t&&c.hasOwnProperty(t)&&(t=c[t]):t=[u(2),t],t)],h=l.unary={"-":17,"!":17,"+":17,"++":17,"--":17},g=l.binary={",":1,"||":6,"&&":7,"|":8,"^":9,"&":10,"==":11,"!=":11,"<":12,">":12,"<=":12,">=":12,"<<":13,">>":13,">>>":13,"+":14,"-":14,"*":15,"/":15,"%":15},A=l,b=e=>Array.isArray(e)&&("string"==typeof e[0]||b(e[0])),m=(e,r={},t,l)=>b(e)?("string"==typeof(t=e[0])&&(l=v[t]),"function"!=typeof(t=l||m(t,r))?t:t.call(...e.map((e=>m(e,r))))):e&&"string"==typeof e?'"'===e[0]?e.slice(1,-1):"@"===e[0]?e.slice(1):e in r?r[e]:e:e,v=m.operator={"!":e=>!e,"++":e=>++e,"--":e=>--e,".":(...e)=>e.reduce(((e,r)=>e&&e[r])),"%":(...e)=>e.reduce(((e,r)=>e%r)),"/":(...e)=>e.reduce(((e,r)=>e/r)),"*":(...e)=>e.reduce(((e,r)=>e*r)),"+":(...e)=>e.reduce(((e,r)=>e+r)),"-":(...e)=>e.length<2?-e:e.reduce(((e,r)=>e-r)),">>>":(e,r)=>e>>>r,">>":(e,r)=>e>>r,"<<":(e,r)=>e<<r,">=":(e,r)=>e>=r,">":(e,r)=>e>r,"<=":(e,r)=>e<=r,"<":(e,r)=>e<r,"!=":(e,r)=>e!=r,"==":(e,r)=>e==r,"&":(e,r)=>e&r,"^":(e,r)=>e^r,"|":(e,r)=>e|r,"&&":(...e)=>e.every(Boolean),"||":(...e)=>e.some(Boolean),",":(...e)=>e.reduce(((e,r)=>r))},w=m,x=e=>(e="string"==typeof e?A(e):e,r=>w(e,r));export{x as default,w as evaluate,A as parse};