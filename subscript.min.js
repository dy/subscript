var e,r,t=(t,a)=>(r=t,e=0,a=f(),e<r.length?o():a),o=(t="Bad syntax")=>{throw Error(t+" `"+r[e]+"` at "+e)},a=(t=1,o=e)=>{if("number"==typeof t)e+=t;else for(;t(n());)e++;return r.slice(o,e)||u},n=(t=0)=>r.charCodeAt(e+t),s=(t=1)=>r.substr(e,t),u="",f=(r=0,a=t.space(),n,s=e,f=0,p,c)=>{for(;s===e&&f<t.token.length;)n=t.token[f++](a);for(;(a=t.space())&&(p=i[a]||o())&&(c=p(a,n,r));)(n=c).indexOf(u)>=0&&o();return n},i=(t.space=r=>{for(;(r=n())<=32;)e++;return r},t.token=[e=>(e=a((e=>e>47&&e<58||46===e)))?((69===n()||101===n())&&(e+=a(2)+a((e=>e>=48&&e<=57))),isNaN(e=parseFloat(e))?o("Bad number"):e):u,(e,r)=>34===e?a()+a((r=>r-e))+a():u,r=>40===r?(++e,r=f(),++e,r===u?o():r):u,e=>a((e=>e>=48&&e<=57||e>=65&&e<=90||e>=97&&e<=122||36==e||95==e||e>=192&&215!=e&&247!=e))],t.lookup=[]),p=(e,r,n=1,p,c=i[e])=>i[e]=(e,i,p,l,y,d)=>{if(i===u&&o(),p<r&&(l="function"==typeof n?n(e,i):n)){if("number"==typeof l){y=[d=s(l),i];do{a(l),y.push(f(r))}while(t.space()==e&&s(l)==d)}else y=l;return y}if(c)return c(e,i,p)};p(44,1),p(124,6),p(124,4,(e=>124==n(1)&&2)),p(38,8),p(38,5,(e=>38==n(1)&&2)),p(94,7),p(61,9,(e=>n(1)==n(2)?3:2)),p(33,9,(e=>n(1)==n(2)?3:2)),p(62,10,(e=>61==n(1)?2:1)),p(62,11,(e=>n(1)==e&&(n(2)===n(1)?3:2))),p(60,10,(e=>61==n(1)?2:1)),p(60,11,(e=>n(1)==e&&2)),i[43]=i[45]=(e,r,t)=>(r===u||n(1)==e)&&t<15&&[a(n(1)==e?2:1),r===u?f(14):r]||t<12&&[a(),r,f(12)],i[33]=(e,r,t)=>r===u&&t<15&&[a(),f(14)],p(42,13),p(47,13),p(37,13),i[46]=(e,r,t,o)=>t<18&&[a(),r,"string"==typeof(o=f(18))?'"'+o+'"':o],i[91]=(r,t,o)=>o<18&&(e++,t=[".",t,f()],e++,t),i[40]=(r,t,o,a)=>o<18&&(e++,a=f(),e++,Array.isArray(a)&&","===a[0]?(a[0]=t,a):a===u?[t]:[t,a]),i[93]=i[41]=e=>{};var c=t,l=e=>Array.isArray(e)&&("string"==typeof e[0]||l(e[0])),y=(e,r={},t,o)=>l(e)?("string"==typeof(t=e[0])&&(o=d[t]),"function"!=typeof(t=o||y(t,r))?t:t.call(...e.map((e=>y(e,r))))):e&&"string"==typeof e?'"'===e[0]?e.slice(1,-1):"@"===e[0]?e.slice(1):e in r?r[e]:e:e,d=y.operator={"!":e=>!e,"++":e=>++e,"--":e=>--e,".":(...e)=>e.reduce(((e,r)=>e&&e[r])),"%":(...e)=>e.reduce(((e,r)=>e%r)),"/":(...e)=>e.reduce(((e,r)=>e/r)),"*":(...e)=>e.reduce(((e,r)=>e*r)),"+":(...e)=>e.reduce(((e,r)=>e+r)),"-":(...e)=>e.length<2?-e:e.reduce(((e,r)=>e-r)),">>>":(e,r)=>e>>>r,">>":(e,r)=>e>>r,"<<":(e,r)=>e<<r,">=":(e,r)=>e>=r,">":(e,r)=>e>r,"<=":(e,r)=>e<=r,"<":(e,r)=>e<r,"!=":(e,r)=>e!=r,"==":(e,r)=>e==r,"&":(e,r)=>e&r,"^":(e,r)=>e^r,"|":(e,r)=>e|r,"&&":(...e)=>e.every(Boolean),"||":(...e)=>e.some(Boolean),",":(...e)=>e.reduce(((e,r)=>r))},g=y,h=e=>(e="string"==typeof e?c(e):e,r=>g(e,r));export{h as default,g as evaluate,c as parse};