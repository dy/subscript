let r,e,t=(t,...a)=>(e=t.raw?String.raw(t,...a):t,r=0,!(t=p())||r<e.length?l():r=>t(r||{})),a=r=>r>=48&&r<=57||r>=65&&r<=90||r>=97&&r<=122||36==r||95==r||r>=192&&215!=r&&247!=r,l=(t="Bad syntax")=>{throw Error(t+" `"+e[r]+"` at "+r)},o=(t=1,a=r,l)=>{if("number"==typeof t)r+=t;else if(l=t.trim&&t.length)r+=s(l)==t?l:0;else for(;t(n());)r++;return e.slice(a,r)},n=(t=0)=>e.charCodeAt(r+t),s=(t=1)=>e.substr(r,t),p=(e=0,a,o,n,s,p,g)=>{for(;(o=t.space())&&(s=(p=i[o])&&p(n,e)||!n&&(h(o)||f(o)||l()));)n=s;return a&&(o!=a?l("Unclosed paren"):r++),n};t.space=e=>{for(;(e=n())<=32;)r++;return e};let g=t.literal=[],h=(e,t=0,a,l=r)=>{for(;t<g.length;)if(a=g[t++](e),r>l)return()=>a},f=t.id=(r,e=o(a),t=(e?r=>r[e]:()=>_))=>(t._=e,t),i=[],u=t.operator=(e,t=0,l=0,o,g=e.map&&u(e[1],(e=e[0],0)),h=e.charCodeAt(0),f=e.length,_=l&&i[h],c=l.length,d=e.toUpperCase()!==e)=>(o=c>1?(e,a)=>e&&(r+=f,a=p(g?0:t,g),e.length||a.length?r=>l(e(r),a(r),e._,a._):(e=l(e(),a(),e._,a._),()=>e)):c?e=>e&&(r+=f,r=>l(e(r),e._)):e=>!e&&(r+=f,e=p(g?0:t-1,g),r=>l(e(r),e._)),i[h]=(r,l)=>l<t&&(f<2||s(f)==e)&&(!d||!a(n(f)))&&o(r)||_&&_(r,l),h),_=[];t.literal.push((r=>(r=o((r=>r>47&&r<58||46==r)))&&((69==n()||101==n())&&(r+=o(2)+o((r=>r>=48&&r<=57))),+r)),((r,e,t)=>34==r&&(o(),t=o((e=>e-r)),o(),t)));for(let r,e=0,a=[",",1,(e,t)=>(e=(r=>r&&r.args?r:(r=r===_?[,]:[r]).args=r)(e)).push(t===_?r:t)&&e,"|",6,(r,e)=>r|e,"||",4,(r,e)=>r||e,"&",8,(r,e)=>r&e,"&&",5,(r,e)=>r&&e,"^",7,(r,e)=>r^e,"==",9,(r,e)=>r==e,"!=",9,(r,e)=>r!=e,">",10,(r,e)=>r>e,">=",10,(r,e)=>r>=e,">>",11,(r,e)=>r>>e,">>>",11,(r,e)=>r>>>e,"<",10,(r,e)=>r<e,"<=",10,(r,e)=>r<=e,"<<",11,(r,e)=>r<<e,"+",12,(r,e)=>r+e,"+",15,(e=r)=>+e,"++",15,(e=r)=>++e,"++",16,r=>r++,"-",12,(r,e)=>r-e,"-",15,(e=r)=>-e,"--",15,(e=r)=>--e,"--",16,r=>r++,"!",15,(e=r)=>!e,"*",13,(r,e)=>r*e,"/",13,(r,e)=>r/e,"%",13,(r,e)=>r%e,["[","]"],18,(r,e)=>r[e],".",18,(r,e,t,a)=>r[a||e],["(",")"],18,(r,e)=>e&&e.args?r(...e):r(e),["(",")"],19,(e=r)=>e&&e.args?e.pop():e];e<a.length;)t.operator(a[e++],a[e++],a[e++]);export{t as default};