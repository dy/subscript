var e,r,t=e=>Array.isArray(e)&&("string"==typeof e[0]||t(e[0])),o=(e,r={},n,s)=>t(e)?("string"==typeof(n=e[0])&&(s=a[n]),"function"!=typeof(n=s||o(n,r))?n:n.call(...e.map((e=>o(e,r))))):e&&"string"==typeof e?'"'===e[0]?e.slice(1,-1):"@"===e[0]?e.slice(1):e in r?r[e]:e:e,a=o.operator={"!":e=>!e,"++":e=>++e,"--":e=>--e,".":(...e)=>e.reduce(((e,r)=>e&&e[r])),"%":(...e)=>e.reduce(((e,r)=>e%r)),"/":(...e)=>e.reduce(((e,r)=>e/r)),"*":(...e)=>e.reduce(((e,r)=>e*r)),"+":(...e)=>e.reduce(((e,r)=>e+r)),"-":(...e)=>e.length<2?-e:e.reduce(((e,r)=>e-r)),">>>":(e,r)=>e>>>r,">>":(e,r)=>e>>r,"<<":(e,r)=>e<<r,">=":(e,r)=>e>=r,">":(e,r)=>e>r,"<=":(e,r)=>e<=r,"<":(e,r)=>e<r,"!=":(e,r)=>e!=r,"==":(e,r)=>e==r,"&":(e,r)=>e&r,"^":(e,r)=>e^r,"|":(e,r)=>e|r,"&&":(...e)=>e.every(Boolean),"||":(...e)=>e.some(Boolean),",":(...e)=>e.reduce(((e,r)=>r))},n=15,s=(t,o)=>(r=t,e=0,o=c(),e<r.length?p():o),p=(t="Bad syntax")=>{throw Error(t+" `"+r[e]+"` at "+e)},l=(t=1,o=e)=>{if("number"==typeof t)e+=t;else for(;t(u());)e++;return r.slice(o,e)||f},u=(t=0)=>r.charCodeAt(e+t),i=(t=1)=>r.substr(e,t),f="",c=(r=0,t=s.space(),o,a=e,n=0,l,u)=>{for(;a===e&&n<s.token.length;)o=s.token[n++](t);for(;(t=s.space())&&(l=d[t]||p())&&(u=l(o,r));)(o=u).indexOf(f)>=0&&p();return o},d=(s.space=r=>{for(;(r=u())<=32;)e++;return r},s.token=[e=>(e=l((e=>e>47&&e<58||46===e)))?((69===u()||101===u())&&(e+=l(2)+l((e=>e>=48&&e<=57))),isNaN(e=parseFloat(e))?p("Bad number"):e):f,(e,r)=>34===e?l()+l((r=>r-e))+l():f,r=>40===r?(++e,r=c(),++e,r===f?p():r):f,e=>l((e=>e>=48&&e<=57||e>=65&&e<=90||e>=97&&e<=122||36==e||95==e||e>=192&&215!=e&&247!=e))],[]),h=(r,t=0,o,a=r.charCodeAt(0),n=r.length,p=d[a],h=r.toUpperCase()!==r)=>(o="number"==typeof o?o>0?e=>e!==f&&[l(n),e]:e=>e===f&&[l(n),c(t-1)]:o,d[a]=(l,f)=>{if(f<t&&i(n)==r&&(!h||u(n)<=32))if(o)l=o(l)||p&&p(l,f);else{l=[r,l];do{e+=n,l.push(c(t))}while(s.space()==a&&i(n)==r&&(!h||u(n)<=32))}else l=p&&p(l,f);return l});for(let r=0,t=[",",1,,"|",6,,"||",4,,"&",8,,"&&",5,,"^",7,,"==",9,,"!=",9,,">",10,,">=",10,,">>",11,,">>>",11,,"<",10,,"<=",10,,"<<",11,,"+",12,,"+",n,-1,"++",n,-1,"++",n,1,"-",12,,"-",n,-1,"--",n,-1,"--",n,1,"!",n,-1,"*",13,,"/",13,,"%",13,,".",18,(e,r)=>[l(),e,"string"==typeof(r=c(18))?'"'+r+'"':r],"[",18,r=>(e++,r=[".",r,c()],e++,r),"]",,,"(",18,(r,t)=>(e++,t=c(),e++,Array.isArray(t)&&","===t[0]?(t[0]=r,t):t===f?[r]:[r,t]),")",,,];r<t.length;)h(t[r++],t[r++],t[r++]);h(";",1),s.token.splice(3,0,(e=>!(116!==e||"true"!==i(4)||!l(4))||(102!==e||"false"!==i(5)||!l(5))&&(110===e&&"null"===i(4)&&l(4)?null:void(117===e&&"undefined"===i(9)&&l(9))))),s.token[1]=(e,r,t,o)=>{if(34===e||39===e){for(r=i(),l(),o="";(t=u())-e;)92===t?(l(),o+=y[i()]||i()):o+=i(),l();return l(),r+o+r}};var y={n:"\n",r:"\r",t:"\t",b:"\b",f:"\f",v:"\v"};o.operator["**"]=(...e)=>e.reduceRight(((e,r)=>Math.pow(r,e))),h("**",14),h("~",13,-1),o.operator["~"]=e=>~e,o.operator["?:"]=(e,r,t)=>e?r:t,h("?",3,(e=>{let r,t;return l(),s.space(),r=c(0),58!==u()&&p("Expected :"),l(),s.space(),t=c(0),["?:",e,r,t]})),s.space=e=>{for(;(e=u())<=32;)l(),47===u()&&(42===u(1)?(l(2),l((e=>42!==e&&47!==u(1))),l(2)):47===u(1)&&(l(2),l((e=>e>=32))));return e},o.operator.in=(e,r)=>e in r,h("in",10,(e=>u(2)<=32&&[l(2),'"'+e+'"',c(10)])),o.operator["["]=(...e)=>Array(...e),s.token.unshift(((e,r,t)=>91===e?(l(),r=(t=c())===f?["["]:","===t[0]?(t[0]="[",t):["[",t],l(),r):f)),s.token.unshift(((e,r)=>123===e?(l(),r=g(["{",c()]),l(),r):null)),h("}"),h(":",4),o.operator["{"]=(...e)=>Object.fromEntries(e),o.operator[":"]=(e,r)=>[e,r];var g=(e,r)=>(e[1]===f?r=[]:":"==e[1][0]?r=[e[1]]:","==e[1][0]&&(r=e[1].slice(1)),["{",...r]),v=s;export{v as default,o as evaluate,s as parse};