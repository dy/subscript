let e,r;const t=(t,n)=>(r=t,e=0,n=l(),e<r.length?o():c(n)),o=(t="Bad syntax")=>{throw Error(t+" `"+r[e]+"` at "+e)},n=(t=1,o=e)=>{if("number"==typeof t)e+=t;else for(;t(a());)e++;return r.slice(o,e)},a=(t=0)=>r.charCodeAt(e+t),s=(t=1)=>r.substr(e,t),l=(r=0,n,a,s,l=0,p,u)=>{for(;(a=t.space())&&(u=i[a]?.(s,r)||!s&&f(a));)s=u;return n&&(a!=n?o("Unclosed paren"):e++),s};t.space=r=>{for(;(r=a())<=32;)e++;return r};const p=t.token=[],f=(e,r=0,t)=>{for(;r<p.length;)if(t=p[r++](e))return t},i=[],u=t.operator=(r,o=0,p=0,f,u=r.charCodeAt(0),y=r.length,h=i[u],g=p<=0&&r.toUpperCase()!==r)=>(f=p?p>0?e=>e&&[n(y),c(e)]:p<0?e=>!e&&[n(y),c(l(o-1))]:p:n=>{n=[r,c(n)];do{e+=y,n.push(c(l(o)))}while(t.space()==u&&(y<2||s(y)==r)&&(!g||a(y)<=32));return n},i[u]=(e,t)=>t<o&&(y<2||s(y)==r)&&(!g||a(y)<=32)&&f(e)||h&&h(e,t)),c=e=>Array.isArray(e)?e:(e||o()).valueOf(),y=e=>Array.isArray(e)&&("string"==typeof e[0]||y(e[0])),h=(e,r={},t,o)=>y(e)?("string"==typeof(t=e[0])&&(o=g[t]),"function"!=typeof(t=o||h(t,r))?t:t.call(...e.map((e=>h(e,r))))):e&&"string"==typeof e?'"'===e[0]?e.slice(1,-1):"@"===e[0]?e.slice(1):e in r?r[e]:e:e,g={},d=h.operator=(e,r)=>g[e]=2==r.length?(...e)=>e.reduce(r):r;p.push((e=>(e=n((e=>e>47&&e<58||46==e)))&&((69==a()||101==a())&&(e+=n(2)+n((e=>e>=48&&e<=57))),isNaN(e=new Number(e))?o("Bad number"):e)),((e,r)=>34==e&&n()+n((r=>r-e))+n()),(e=>n((e=>e>=48&&e<=57||e>=65&&e<=90||e>=97&&e<=122||36==e||95==e||e>=192))));const A=(e,r=2,t)=>{for(let o=0;o<t.length;o+=r)e(t[o],t[o+1],t[o+2])};A(u,3,[",",1,,"|",6,,"||",4,,"&",8,,"&&",5,,"^",7,,"==",9,,"!=",9,,">",10,,">=",10,,">>",11,,">>>",11,,"<",10,,"<=",10,,"<<",11,,"+",12,,"+",15,-1,"++",15,-1,"++",16,1,"-",12,,"-",15,-1,"--",15,-1,"--",16,1,"!",15,-1,"*",13,,"/",13,,"%",13,,".",18,(e,r)=>e&&[n(),e,"string"==typeof(r=l(18))?'"'+r+'"':r.valueOf()],"[",18,e=>(n(),[".",e,c(l(0,93))]),"]",,,"(",18,(e,r)=>(n(),r=l(0,41),Array.isArray(r)&&","===r[0]?(r[0]=e,r):r?[e,c(r)]:[e]),"(",19,(e,r)=>!e&&(n(),l(0,41)||o()),")",,,]),A(d,2,["!",e=>!e,"++",e=>++e,"--",e=>--e,".",(e,r)=>e?e[r]:e,"%",(e,r)=>e%r,"/",(e,r)=>e/r,"*",(e,r)=>e*r,"+",(e,r)=>e+r,"-",(...e)=>e.length<2?-e:e.reduce(((e,r)=>e-r)),">>>",(e,r)=>e>>>r,">>",(e,r)=>e>>r,"<<",(e,r)=>e<<r,">=",(e,r)=>e>=r,">",(e,r)=>e>r,"<=",(e,r)=>e<=r,"<",(e,r)=>e<r,"!=",(e,r)=>e!=r,"==",(e,r)=>e==r,"&",(e,r)=>e&r,"^",(e,r)=>e^r,"|",(e,r)=>e|r,"&&",(...e)=>e.every(Boolean),"||",(...e)=>e.some(Boolean),",",(e,r)=>r]);var m=e=>(e="string"==typeof e?t(e):e,r=>h(e,r));export{m as default,h as evaluate,t as parse};