let r,e,t=(t,a)=>(e=t,r=0,a=p(),r<e.length?l():a||l()),a=r=>r>=48&&r<=57||r>=65&&r<=90||r>=97&&r<=122||36==r||95==r||r>=192&&215!=r&&247!=r,l=(t="Bad syntax")=>{throw Error(t+" `"+e[r]+"` at "+r)},o=(t=1,a=r,l=0)=>{if("number"==typeof t)r+=t;else if(t.trim)for(;n()==t.charCodeAt(l++);)r++;else for(;t(n());)r++;return e.slice(a,r)},n=(t=0)=>e.charCodeAt(r+t),p=(e=0,a,o,n,p,h,u)=>{for(;(o=t.space())&&(p=(h=i[o])&&h(n,e)||!n&&(s(o)||f(o)||l()));)n=p;return a&&(o!=a?l("Unclosed paren"):r++),n};t.space=e=>{for(;(e=n())<=32;)r++;return e};let h=t.literal=[],s=(e,t=0,a,l=r)=>{for(;t<h.length;)if(a=h[t++](e),r>l)return()=>a},f=t.id=(r,e=o(a))=>r=>r?r[e]:e,i=[],u=t.operator=(t,l=0,o=0,h,s=t.map&&u(t[1],(t=t[0],0)),f=t.charCodeAt(0),g=t.length,c=o&&i[f],d=o.length,m=t.toUpperCase()!==t)=>(h=d>1?(e,t)=>e&&(r+=g,t=p(s?0:l,s),d>2?r=>o(e,t,r):e.length||t.length?r=>o(e(r),t(r)):(e=o(e(),t()),()=>e)):d?e=>e&&(r+=g,r=>o(e(r))):e=>!e&&(r+=g,e=p(s?0:l-1,s),r=>o(e(r))),i[f]=(o,p)=>p<l&&(g<2||((t=1)=>e.substr(r,t))(g)==t)&&(!m||!a(n(g)))&&h(o)||c&&c(o,p),f);var g=(r,...e)=>t(r.raw?String.raw(r,...e):r);t.literal.push((r=>(r=o((r=>r>47&&r<58||46==r)))&&((69==n()||101==n())&&(r+=o(2)+o((r=>r>=48&&r<=57))),+r)),((r,e,t)=>34==r&&(o(),t=o((e=>e-r)),o(),t)));for(let r,e=0,a=[",",1,(e,t,a,l=r)=>l?(r=0,(l=1==l?[e(a)]:l).push(t(a)),r=l):t(a),"|",6,(r,e)=>r|e,"||",4,(r,e)=>r||e,"&",8,(r,e)=>r&e,"&&",5,(r,e)=>r&&e,"^",7,(r,e)=>r^e,"==",9,(r,e)=>r==e,"!=",9,(r,e)=>r!=e,">",10,(r,e)=>r>e,">=",10,(r,e)=>r>=e,">>",11,(r,e)=>r>>e,">>>",11,(r,e)=>r>>>e,"<",10,(r,e)=>r<e,"<=",10,(r,e)=>r<=e,"<<",11,(r,e)=>r<<e,"+",12,(r,e)=>r+e,"+",15,(r=0)=>+r,"++",15,(r=0)=>++r,"++",16,r=>r++,"-",12,(r,e)=>r-e,"-",15,(r=0)=>-r,"--",15,(r=0)=>--r,"--",16,r=>r++,"!",15,(r=0)=>!r,"*",13,(r,e)=>r*e,"/",13,(r,e)=>r/e,"%",13,(r,e)=>r%e,["[","]"],18,(r,e)=>r[e],".",18,(r,e,t)=>r(t)[e()],["(",")"],18,(e,t,a,l=r)=>(e=e(a),r=1,t=t(a),t=r.map?e.apply(a,t):e(t),r=l,t),["(",")"],19,(r=0)=>r];e<a.length;)t.operator(a[e++],a[e++],a[e++]);export{g as default};