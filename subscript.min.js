let e,r,t,o,a,n,d=(t,...o)=>(r=t.raw?String.raw(t,...o):t,e=0,!(t=h())||r[e]?p("Unexpected end"):e=>t(e||{})),l=e=>e>=48&&e<=57||e>=65&&e<=90||e>=97&&e<=122||36==e||95==e||e>=192&&215!=e&&247!=e,p=(t="Unexpected token",o=r[e])=>{throw SyntaxError(t+" `"+o+"` at "+e)},f=(t=1,o=e,a)=>{if("number"==typeof t)e+=t;else for(;t(r.charCodeAt(e));)e++;return r.slice(o,e)},h=(r=0,t,o,a,n,d)=>{for(;(o=i())&&(n=(d=c[o])&&d(a,r)||!a&&s());)a=n;return t&&(o==t?e++:p("Missing",String.fromCharCode(t))),a},i=t=>{for(;(t=r.charCodeAt(e))<=32;)e++;return t},s=(e=f(l),r)=>e?((r=r=>r[e]).id=()=>e,r):0,c=[],g=d.set=(t,o,a=32,n=t.charCodeAt(0),d=t.length,p=c[n],f=a.length||([a,o]=[o,a],0),i=t.toUpperCase()!==t,s=(f>1?(e,r)=>e&&(r=h(o))&&(e.length||r.length?t=>a(e(t),r(t)):(e=a(e(),r()),()=>e)):f?e=>!e&&(e=h(o-1))&&(r=>a(e(r))):a))=>c[n]=(a,n,f=e)=>n<o&&(d<2||r.substr(e,d)==t)&&(!i||!l(r.charCodeAt(e+d)))&&(e+=d,s(a,n))||(e=f,p&&p(a,n)),u=e=>e>=48&&e<=57,C=t=>(t&&p("Unexpected number"),t=f((e=>46==e||u(e))),(69==r.charCodeAt(e)||101==r.charCodeAt(e))&&(t+=f(2)+f(u)),(t=+t)!=t?p("Bad number"):()=>t),m=(e,r,t=e.of)=>o=>r(t?t(o):o,e.id());for(o=48;o<=57;)c[o++]=C;for(t=['"',e=>(e=e?p("Unexpected string"):f((e=>e-34)),f()||p("Bad string"),()=>e),,".",(e,r,t)=>e?(i(),r=f(l)||p(),(t=t=>e(t)[r]).id=()=>r,t.of=e,t):C(f(-1)),18,"[",(e,r,t)=>e&&(r=h(0,93)||p("Empty group"),(t=t=>e(t)[r(t)]).id=r,t.of=e,t),18,"(",(e,r,t)=>(r=h(0,41),e?t=>e(t).apply(e.of?.(t),r?r.all?r.all(t):[r(t)]:[]):r||p("Empty group")),18,",",(e,r,t=h(1))=>(t.all=e.all?(r,o,a=e.all(r))=>a.push(t(r))&&a:r=>[e(r),t(r)],t),1,"|",6,(e,r)=>e|r,"||",4,(e,r)=>e||r,"&",8,(e,r)=>e&r,"&&",5,(e,r)=>e&&r,"^",7,(e,r)=>e^r,"==",9,(e,r)=>e==r,"!=",9,(e,r)=>e!=r,">",10,(e,r)=>e>r,">=",10,(e,r)=>e>=r,">>",11,(e,r)=>e>>r,">>>",11,(e,r)=>e>>>r,"<",10,(e,r)=>e<r,"<=",10,(e,r)=>e<=r,"<<",11,(e,r)=>e<<r,"+",12,(e,r)=>e+r,"+",15,e=>+e,"++",e=>m(e||h(14),e?(e,r)=>e[r]++:(e,r)=>++e[r]),15,"-",12,(e,r)=>e-r,"-",15,e=>-e,"--",e=>m(e||h(14),e?(e,r)=>e[r]--:(e,r)=>--e[r]),15,"!",15,e=>!e,"*",13,(e,r)=>e*r,"/",13,(e,r)=>e/r,"%",13,(e,r)=>e%r];[o,a,n,...t]=t,o;)g(o,a,n);export{d as default};