var e,r,t=(t,o)=>(r=t,e=0,o=u(),e<r.length?a():o),a=(t="Bad syntax")=>{throw Error(t+" `"+r[e]+"` at "+e)},o=(t=1,a=e)=>{if("number"==typeof t)e+=t;else for(;t(n());)e++;return r.slice(a,e)||f},n=(t=0)=>r.charCodeAt(e+t),s=(t=1)=>r.substr(e,t),f="",u=(r=0,o=t.space(),n,s=e,u=0,i,p)=>{for(;s===e&&u<t.token.length;)n=t.token[u++](o);for(;(o=t.space())&&(i=c[o]||a())&&(p=i(n,r));)(n=p).indexOf(f)>=0&&a();return n},c=(t.space=r=>{for(;(r=n())<=32;)e++;return r},t.token=[e=>(e=o((e=>e>47&&e<58||46===e)))?((69===n()||101===n())&&(e+=o(2)+o((e=>e>=48&&e<=57))),isNaN(e=parseFloat(e))?a("Bad number"):e):f,(e,r)=>34===e?o()+o((r=>r-e))+o():f,r=>40===r?(++e,r=u(),++e,r===f?a():r):f,e=>o((e=>e>=48&&e<=57||e>=65&&e<=90||e>=97&&e<=122||36==e||95==e||e>=192&&215!=e&&247!=e))],[]),i=(r,a=0,o,n=r.charCodeAt(0),f=r.length,i=c[n])=>c[n]=(c,p,l)=>{if(p<a&&s(f)==r&&(l=o?o(c):(e+=f,[r,c,u(a)]))){if(!o)for(;t.space()==n&&s(f)==r;)e+=f,l.push(u(a));return l}if(i)return i(c,p)};i(",",1),i("|",6),i("||",4),i("|",8),i("||",5),i("^",7),i("==",9),i("!=",9),i(">",10),i(">=",10),i(">>",11),i(">>>",11),i("<",10),i("<=",10),i("<<",11),i("+",12),i("-",12),i("+",15,(e=>(e===f||43==n(1))&&[o(43==n(1)?2:1),e===f?u(14):e])),i("-",15,(e=>(e===f||45==n(1))&&[o(45==n(1)?2:1),e===f?u(14):e])),i("!",15,(e=>e===f&&[o(1),u(14)])),i("*",13),i("/",13),i("%",13),i(".",18,((e,r)=>[o(),e,"string"==typeof(r=u(18))?'"'+r+'"':r])),i("[",18,(r=>(e++,r=[".",r,u()],e++,r))),i("]"),i("(",18,((r,t)=>(e++,t=u(),e++,Array.isArray(t)&&","===t[0]?(t[0]=r,t):t===f?[r]:[r,t]))),i(")");var p=t,l=e=>Array.isArray(e)&&("string"==typeof e[0]||l(e[0])),d=(e,r={},t,a)=>l(e)?("string"==typeof(t=e[0])&&(a=y[t]),"function"!=typeof(t=a||d(t,r))?t:t.call(...e.map((e=>d(e,r))))):e&&"string"==typeof e?'"'===e[0]?e.slice(1,-1):"@"===e[0]?e.slice(1):e in r?r[e]:e:e,y=d.operator={"!":e=>!e,"++":e=>++e,"--":e=>--e,".":(...e)=>e.reduce(((e,r)=>e&&e[r])),"%":(...e)=>e.reduce(((e,r)=>e%r)),"/":(...e)=>e.reduce(((e,r)=>e/r)),"*":(...e)=>e.reduce(((e,r)=>e*r)),"+":(...e)=>e.reduce(((e,r)=>e+r)),"-":(...e)=>e.length<2?-e:e.reduce(((e,r)=>e-r)),">>>":(e,r)=>e>>>r,">>":(e,r)=>e>>r,"<<":(e,r)=>e<<r,">=":(e,r)=>e>=r,">":(e,r)=>e>r,"<=":(e,r)=>e<=r,"<":(e,r)=>e<r,"!=":(e,r)=>e!=r,"==":(e,r)=>e==r,"&":(e,r)=>e&r,"^":(e,r)=>e^r,"|":(e,r)=>e|r,"&&":(...e)=>e.every(Boolean),"||":(...e)=>e.some(Boolean),",":(...e)=>e.reduce(((e,r)=>r))},g=d,h=e=>(e="string"==typeof e?p(e):e,r=>g(e,r));export{h as default,g as evaluate,p as parse};