var e,r,t=e=>Array.isArray(e)&&("string"==typeof e[0]||t(e[0])),a=(e,r={},o,s)=>t(e)?("string"==typeof(o=e[0])&&(s=n[o]),"function"!=typeof(o=s||a(o,r))?o:o.call(...e.map((e=>a(e,r))))):e&&"string"==typeof e?'"'===e[0]?e.slice(1,-1):"@"===e[0]?e.slice(1):e in r?r[e]:e:e,n={},o=(a.operator=(e,r)=>n[e]=2==r.length?(...e)=>e.reduce(r):r,(t,a)=>(r=t,e=0,a=p(),e<r.length?s():d(a))),s=(t="Bad syntax")=>{throw Error(t+" `"+r[e]+"` at "+e)},l=(t=1,a=e)=>{if("number"==typeof t)e+=t;else for(;t(u());)e++;return r.slice(a,e)},u=(t=0)=>r.charCodeAt(e+t),f=(t=1)=>r.substr(e,t),p=(e=0,r,t,a,n=0,l,u)=>{for(;(t=o.space())&&(u=y[t]?.(a,e)||!a&&c(t));)a=u;return r&&t!==r&&s("Unclosed paren"),a},i=(o.space=r=>{for(;(r=u())<=32;)e++;return r},o.token=[]),c=(e,r=0,t)=>{for(;r<i.length;)if(t=i[r++](e))return t},y=[],d=(o.operator=(r,t=0,a=0,n,i=r.charCodeAt(0),c=r.length,h=y[i],v=r.toUpperCase()!==r,g)=>(n=a?a>0?e=>e&&[l(c),d(e)]:a<0?e=>!e&&[l(c),d(p(t-1))]:a:a=>{a=[r,a||s()];do{e+=c,a.push(d(p(t)))}while(o.space()==i&&(c<2||f(c)==r)&&(!v||u(c)<=32));return a},y[i]=(e,a)=>a<t&&(c<2||f(c)==r)&&(!v||u(c)<=32)&&n(e)||h&&h(e,a)),e=>Array.isArray(e)?e:(e||s()).valueOf()),h=10,v=15,g=e=>({valueOf:()=>e});o.token.push((e=>(e=l((e=>e>47&&e<58||46==e)))&&((69==u()||101==u())&&(e+=l(2)+l((e=>e>=48&&e<=57))),isNaN(e=new Number(e))?s("Bad number"):e)),((e,r,t,a)=>{if(34===e||39===e){for(r=f(),l(),a="";(t=u())-e;)92===t?(l(),a+=A[f()]||f()):a+=f(),l();return l(),r+a+r}}),(e=>116===e&&"true"===f(4)&&l(4)?g(!0):102===e&&"false"===f(5)&&l(5)?g(!1):110===e&&"null"===f(4)&&l(4)?g(null):117===e&&"undefined"===f(9)&&l(9)?g(void 0):null),(e=>l((e=>e>=48&&e<=57||e>=65&&e<=90||e>=97&&e<=122||36==e||95==e||e>=192&&215!=e&&247!=e))));var A={n:"\n",r:"\r",t:"\t",b:"\b",f:"\f",v:"\v"};o.space=e=>{for(;(e=u())<=32;)l(),47===u()&&(42===u(1)?(l(2),l((e=>42!==e&&47!==u(1))),l(2)):47===u(1)&&(l(2),l((e=>e>=32))));return e};var b=(e,r=2,t)=>{for(let a=0;a<t.length;a+=r)e(t[a],t[a+1],t[a+2])};b(o.operator,3,[",",1,,"|",6,,"||",4,,"&",8,,"&&",5,,"^",7,,"==",9,,"!=",9,,">",h,,">=",h,,">>",11,,">>>",11,,"<",h,,"<=",h,,"<<",11,,"+",12,,"+",v,-1,"++",v,-1,"++",v,1,"-",12,,"-",v,-1,"--",v,-1,"--",v,1,"!",v,-1,"*",13,,"/",13,,"%",13,,".",18,(e,r)=>e&&[l(),e,"string"==typeof(r=p(18))?'"'+r+'"':r.valueOf()],"[",18,e=>(l(),e=[".",e,p(0,93).valueOf()],l(),e),"]",,,"(",18,(e,r)=>(l(),r=p(0,41),l(),Array.isArray(r)&&","===r[0]?(r[0]=e,r):r?[e,r.valueOf()]:[e]),"(",19,(e,r)=>!e&&(l(),r=p(0,41)||s(),l(),r),")",,,";",1,,"===",9,,"!==",9,,"**",14,,"~",v,-1,"?",3,e=>{let r,t;return e||s("Expected expression"),l(),o.space(),r=p(),58!==u()&&s("Expected :"),l(),o.space(),t=p(),["?:",e,r,t]},"}",,,":",,,"in",h,e=>u(2)<=32&&[l(2),'"'+e+'"',p(h)],"[",20,(e,r)=>!e&&(l(),r=p(0,93),l(),r?","==r[0]?(r[0]="[",r):["[",r]:["["]),"{",20,(e,r)=>!e&&(l(),r=p(0,125),l(),r?":"==r[0]?["{",r]:","==r[0]?(r[0]="{",r):["[",r]:["{"])]),b(a.operator,2,["!",e=>!e,"++",e=>++e,"--",e=>--e,".",(e,r)=>e&&e[r],"%",(e,r)=>e%r,"/",(e,r)=>e/r,"*",(e,r)=>e*r,"+",(e,r)=>e+r,"-",(...e)=>e.length<2?-e:e.reduce(((e,r)=>e-r)),">>>",(e,r)=>e>>>r,">>",(e,r)=>e>>r,"<<",(e,r)=>e<<r,">=",(e,r)=>e>=r,">",(e,r)=>e>r,"<=",(e,r)=>e<=r,"<",(e,r)=>e<r,"!=",(e,r)=>e!=r,"==",(e,r)=>e==r,"&",(e,r)=>e&r,"^",(e,r)=>e^r,"|",(e,r)=>e|r,"&&",(...e)=>e.every(Boolean),"||",(...e)=>e.some(Boolean),",",(e,r)=>r,"**",(...e)=>e.reduceRight(((e,r)=>Math.pow(r,e))),"~",e=>~e,"?:",(e,r,t)=>e?r:t,"in",(e,r)=>e in r,"[",(...e)=>Array(...e),"{",(...e)=>Object.fromEntries(e),":",(e,r)=>[e,r]]);var m=e=>(e="string"==typeof e?o(e):e,r=>a(e,r));export{m as default,a as evaluate,o as parse};