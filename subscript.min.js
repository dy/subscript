var e,r,t=(t,a)=>(r=t,e=0,a=u(),e<r.length?o():a),o=(t="Bad syntax")=>{throw Error(t+" `"+r[e]+"` at "+e)},a=(t=1,o=e)=>{if("number"==typeof t)e+=t;else for(;t(n());)e++;return r.slice(o,e)||f},n=(t=0)=>r.charCodeAt(e+t),s=(t=1)=>r.substr(e,t),f="",u=(r=0,a=t.space(),n,s=e,u=0,p,c)=>{for(;s===e&&u<t.token.length;)n=t.token[u++](a);for(;(a=t.space())&&(p=i[a]||o())&&(c=p(a,n,r));)(n=c).indexOf(f)>=0&&o();return n},i=(t.space=r=>{for(;(r=n())<=32;)e++;return r},t.token=[e=>(e=a((e=>e>47&&e<58||46===e)))?((69===n()||101===n())&&(e+=a(2)+a((e=>e>=48&&e<=57))),isNaN(e=parseFloat(e))?o("Bad number"):e):f,(e,r)=>34===e?a()+a((r=>r-e))+a():f,r=>40===r?(++e,r=u(),++e,r===f?o():r):f,e=>a((e=>e>=48&&e<=57||e>=65&&e<=90||e>=97&&e<=122||36==e||95==e||e>=192&&215!=e&&247!=e))],[]),p=(e,r=0,o=1,n=i[e])=>i[e]=(e,f,i,p,c,l)=>{if(i<r&&(p="function"==typeof o?o(e,f):o)){if("number"==typeof p){c=[l=s(p|=0),f];do{a(p),c.push(u(r))}while(t.space()==e&&s(p)==l)}else c=p;return c}if(n)return n(e,f,i)};p(44,1),p(124,6),p(124,4,(e=>124==n(1)&&2)),p(38,8),p(38,5,(e=>38==n(1)&&2)),p(94,7),p(61,9,(e=>n(1)==n(2)?3:2)),p(33,9,(e=>n(1)==n(2)?3:2)),p(62,10,(e=>61==n(1)?2:1)),p(62,11,(e=>62==n(1)&&(n(2)===n(1)?3:2))),p(60,10,(e=>61==n(1)?2:1)),p(60,11,(e=>60==n(1)&&2)),p(43,12),p(45,12),p(43,15,((e,r)=>(r===f||n(1)==e)&&[a(n(1)==e?2:1),r===f?u(14):r])),p(45,15,((e,r)=>(r===f||n(1)==e)&&[a(n(1)==e?2:1),r===f?u(14):r])),p(33,15,((e,r)=>r===f&&[a(1),u(14)])),p(42,13),p(47,13),p(37,13),p(46,18,((e,r,t)=>[a(),r,"string"==typeof(t=u(18))?'"'+t+'"':t])),p(91,18,((r,t)=>(e++,t=[".",t,u()],e++,t))),p(40,18,((r,t,o)=>(e++,o=u(),e++,Array.isArray(o)&&","===o[0]?(o[0]=t,o):o===f?[t]:[t,o]))),p(93),p(41);var c=t,l=e=>Array.isArray(e)&&("string"==typeof e[0]||l(e[0])),y=(e,r={},t,o)=>l(e)?("string"==typeof(t=e[0])&&(o=d[t]),"function"!=typeof(t=o||y(t,r))?t:t.call(...e.map((e=>y(e,r))))):e&&"string"==typeof e?'"'===e[0]?e.slice(1,-1):"@"===e[0]?e.slice(1):e in r?r[e]:e:e,d=y.operator={"!":e=>!e,"++":e=>++e,"--":e=>--e,".":(...e)=>e.reduce(((e,r)=>e&&e[r])),"%":(...e)=>e.reduce(((e,r)=>e%r)),"/":(...e)=>e.reduce(((e,r)=>e/r)),"*":(...e)=>e.reduce(((e,r)=>e*r)),"+":(...e)=>e.reduce(((e,r)=>e+r)),"-":(...e)=>e.length<2?-e:e.reduce(((e,r)=>e-r)),">>>":(e,r)=>e>>>r,">>":(e,r)=>e>>r,"<<":(e,r)=>e<<r,">=":(e,r)=>e>=r,">":(e,r)=>e>r,"<=":(e,r)=>e<=r,"<":(e,r)=>e<r,"!=":(e,r)=>e!=r,"==":(e,r)=>e==r,"&":(e,r)=>e&r,"^":(e,r)=>e^r,"|":(e,r)=>e|r,"&&":(...e)=>e.every(Boolean),"||":(...e)=>e.some(Boolean),",":(...e)=>e.reduce(((e,r)=>r))},g=y,h=e=>(e="string"==typeof e?c(e):e,r=>g(e,r));export{h as default,g as evaluate,c as parse};