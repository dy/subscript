var e,r,a=(a,o)=>(r=a,e=0,o=s(),e<r.length?t():o),t=(a="Bad syntax "+r[e])=>{throw Error(a+" at "+e)},o=(a=1,t=e)=>{if("number"==typeof a)e+=a;else for(;a(n(0));)e++;return t<e?r.slice(t,e):void 0},n=(a.space=r=>{for(;(r=n(0))<=32;)e++;return r},a=>r.charCodeAt(e+a)),s=(r=0,t,o=a.space(),n,s=e,l=0,c)=>{for(;s===e&&l<u.length;)n=u[l++](o);for(l=Math.max(0|i[o=a.space()],r);l<p.length&&!(o===t||l<r);)(c=p[l++](n,o,l,t))&&(n=c,l=Math.max(0|i[o=a.space()],r));return n},l=e=>o((e=>e>=48&&e<=57||e>=65&&e<=90||e>=97&&e<=122||36==e||95==e||e>=192)),u=a.token=[e=>{if(e=o((e=>e>47&&e<58||46===e)))return(69===n(0)||101===n(0))&&(e+=o(2)+o((e=>e>=48&&e<=57))),isNaN(e=parseFloat(e))?t("Bad number"):e},(r,a)=>40===r&&(e++,a=s(0,41),e++,a),(e,r)=>34===e&&o()+o((r=>r-e))+o(),l],c=(t,n,l,u,c=[r[e],t])=>{do{o(),c.push(s(l,u))}while(a.space()===n);return c},p=a.operator=[(e,r,a,t)=>44===r&&c(e,r,a,t),(e,r,a,t)=>124===r&&n(1)===r&&[o(2),e,s(a,t)],(e,r,a,t)=>38===r&&n(1)===r&&[o(2),e,s(a,t)],(e,r,a,t)=>124===r&&[o(),e,s(a,t)],(e,r,a,t)=>94===r&&[o(),e,s(a,t)],(e,r,a,t)=>38===r&&[o(),e,s(a,t)],(e,r,a,t)=>(61===r||33===r)&&61===n(1)&&[o(2),e,s(a,t)],(e,r,a,t)=>(62===r||60===r)&&r!==n(1)&&[o(),e,s(a,t)],(e,r,a,t)=>(60===r||62===r)&&r===n(1)&&[o(r===n(2)?3:2),e,s(a,t)],(e,r,a,t)=>(43===r||45===r)&&null!=e&&n(1)!==r&&c(e,r,a,t),(e,r,a,t)=>(42===r&&42!==n(1)||47===r||37===r)&&c(e,r,a,t),(e,r,a,t)=>(43===r||45===r)&&n(1)===r&&[o(2),e??s(a-1,t)],(e,r,a,t)=>(43===r||45===r||33===r)&&null==e&&[o(1),s(a-1,t)],(r,t,n,u)=>46===t?[o(),r,'"'+(a.space(),l()+'"')]:91===t?(e++,r=[".",r,s(0,93)],e++,r):40===t?(e++,u=s(0,41),e++,Array.isArray(u)&&","===u[0]?(u[0]=r,u):null==u?[r]:[r,u]):null],i=[];i[44]=0,i[124]=1,i[38]=2,i[94]=4,i[61]=i[33]=6,i[60]=i[62]=7,i[43]=i[45]=9,i[42]=i[47]=i[37]=10,i[46]=i[91]=i[40]=13;var f=a,d=e=>Array.isArray(e)&&("string"==typeof e[0]||d(e[0])),y=(e,r={},a,t)=>d(e)?("string"==typeof(a=e[0])&&(t=h[a]),"function"!=typeof(a=t||y(a,r))?a:a.call(...e.map((e=>y(e,r))))):e&&"string"==typeof e?'"'===e[0]?e.slice(1,-1):"@"===e[0]?e.slice(1):e in r?r[e]:e:e,h=y.operator={"!":e=>!e,"++":e=>++e,"--":e=>--e,".":(...e)=>e.reduce(((e,r)=>e&&e[r])),"%":(...e)=>e.reduce(((e,r)=>e%r)),"/":(...e)=>e.reduce(((e,r)=>e/r)),"*":(...e)=>e.reduce(((e,r)=>e*r)),"+":(...e)=>e.reduce(((e,r)=>e+r)),"-":(...e)=>e.length<2?-e:e.reduce(((e,r)=>e-r)),">>>":(e,r)=>e>>>r,">>":(e,r)=>e>>r,"<<":(e,r)=>e<<r,">=":(e,r)=>e>=r,">":(e,r)=>e>r,"<=":(e,r)=>e<=r,"<":(e,r)=>e<r,"!=":(e,r)=>e!=r,"==":(e,r)=>e==r,"&":(e,r)=>e&r,"^":(e,r)=>e^r,"|":(e,r)=>e|r,"&&":(...e)=>e.every(Boolean),"||":(...e)=>e.some(Boolean),",":(...e)=>e.reduce(((e,r)=>r))},g=y,m=e=>(e="string"==typeof e?f(e):e,r=>g(e,r));export{m as default,g as evaluate,f as parse};