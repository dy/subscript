var e,r,t=15,a=(t,a)=>(r=t,e=0,a=f(),e<r.length?o():a),o=(t="Bad syntax")=>{throw Error(t+" `"+r[e]+"` at "+e)},s=(t=1,a=e)=>{if("number"==typeof t)e+=t;else for(;t(n());)e++;return r.slice(a,e)||p},n=(t=0)=>r.charCodeAt(e+t),l=(t=1)=>r.substr(e,t),p="",f=(r=0,t=a.space(),s,n=e,l=0,f,u)=>{for(;n===e&&l<a.token.length;)s=a.token[l++](t);for(;(t=a.space())&&(f=i[t]||o())&&(u=f(s,r));)(s=u).indexOf(p)>=0&&o();return s},i=(a.space=r=>{for(;(r=n())<=32;)e++;return r},a.token=[e=>(e=s((e=>e>47&&e<58||46===e)))?((69===n()||101===n())&&(e+=s(2)+s((e=>e>=48&&e<=57))),isNaN(e=parseFloat(e))?o("Bad number"):e):p,(e,r)=>34===e?s()+s((r=>r-e))+s():p,r=>40===r?(++e,r=f(),++e,r===p?o():r):p,e=>s((e=>e>=48&&e<=57||e>=65&&e<=90||e>=97&&e<=122||36==e||95==e||e>=192&&215!=e&&247!=e))],[]),u=(r,t=0,o,u=r.charCodeAt(0),y=r.length,c=i[u],g=r.toUpperCase()!==r)=>(o="number"==typeof o?o>0?e=>e!==p&&[s(y),e]:e=>e===p&&[s(y),f(t-1)]:o,i[u]=(s,p)=>{if(p<t&&(y<2||l(y)==r)&&(!g||n(y)<=32))if(o)s=o(s)||c&&c(s,p);else{s=[r,s];do{e+=y,s.push(f(t))}while(a.space()==u&&l(y)==r&&(!g||n(y)<=32))}else s=c&&c(s,p);return s});for(let r=0,a=[",",1,,"|",6,,"||",4,,"&",8,,"&&",5,,"^",7,,"==",9,,"!=",9,,">",10,,">=",10,,">>",11,,">>>",11,,"<",10,,"<=",10,,"<<",11,,"+",12,,"+",t,-1,"++",t,-1,"++",t,1,"-",12,,"-",t,-1,"--",t,-1,"--",t,1,"!",t,-1,"*",13,,"/",13,,"%",13,,".",18,(e,r)=>[s(),e,"string"==typeof(r=f(18))?'"'+r+'"':r],"[",18,r=>(e++,r=[".",r,f()],e++,r),"]",,,"(",18,(r,t)=>(e++,t=f(),e++,Array.isArray(t)&&","===t[0]?(t[0]=r,t):t===p?[r]:[r,t]),")",,,];r<a.length;)u(a[r++],a[r++],a[r++]);var y=a,c=e=>Array.isArray(e)&&("string"==typeof e[0]||c(e[0])),g=(e,r={},t,a)=>c(e)?("string"==typeof(t=e[0])&&(a=d[t]),"function"!=typeof(t=a||g(t,r))?t:t.call(...e.map((e=>g(e,r))))):e&&"string"==typeof e?'"'===e[0]?e.slice(1,-1):"@"===e[0]?e.slice(1):e in r?r[e]:e:e,h=e=>(...r)=>r.reduce(e),d=g.operator={"!":e=>!e,"++":e=>++e,"--":e=>--e,".":h(((e,r)=>e&&e[r])),"%":h(((e,r)=>e%r)),"/":h(((e,r)=>e/r)),"*":h(((e,r)=>e*r)),"+":h(((e,r)=>e+r)),"-":(...e)=>e.length<2?-e:e.reduce(((e,r)=>e-r)),">>>":(e,r)=>e>>>r,">>":(e,r)=>e>>r,"<<":(e,r)=>e<<r,">=":(e,r)=>e>=r,">":(e,r)=>e>r,"<=":(e,r)=>e<=r,"<":(e,r)=>e<r,"!=":(e,r)=>e!=r,"==":(e,r)=>e==r,"&":(e,r)=>e&r,"^":(e,r)=>e^r,"|":(e,r)=>e|r,"&&":(...e)=>e.every(Boolean),"||":(...e)=>e.some(Boolean),",":h(((e,r)=>r))},A=g,m=e=>(e="string"==typeof e?y(e):e,r=>A(e,r));export{m as default,A as evaluate,y as parse};