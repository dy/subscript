let t,e,r=r=>(t=0,e=r,r=a(),e[t]?s():r||""),s=(r="Bad syntax",s=e.slice(0,t).split("\n"),o=s.pop())=>{let l=e.slice(t-108,t).split("\n").pop(),a=e.slice(t,t+108).split("\n").shift();throw EvalError(`${r} at ${s.length}:${o.length} \`${t>=108?"…":""}${l}┃${a}\``,"font-weight: bold")},o=(r,s=t,o)=>{for(;o=r(e.charCodeAt(t));)t+=o;return e.slice(s,t)},l=(r=1,s=t)=>(t+=r,e.slice(s,t)),a=(e=0,l)=>{let a,c,p,d;for(;(a=n())&&(p=((d=i[a])&&d(c,e))??(!c&&o(r.id)));)c=p;return l&&(a==l?t++:s()),c},n=r=>{for(;(r=e.charCodeAt(t))<=32;)t++;return r};r.id=t=>t>=48&&t<=57||t>=65&&t<=90||t>=97&&t<=122||36==t||95==t||t>=192&&215!=t&&247!=t;let i=[],c=(s,o=32,l,a=s.charCodeAt(0),n=s.length,c=i[a],p=s.toUpperCase()!==s)=>i[a]=(a,i,d=t)=>i<o&&(n<2||e.substr(t,n)==s)&&(!p||!r.id(e.charCodeAt(t+n)))&&(t+=n,l(a,c))||(t=d,c?.(a,i)),p=(e,r,o=!1)=>c(e,r,((l,n,i)=>l?(i=a(r-(o?.5:0)))&&[e,l,i]:!n&&(t-=e.length,s()))),d=(t,e,r)=>c(t,e,(s=>r?s&&[t,s]:!s&&(s=a(e-.5))&&[t,s])),h=(t,e,r)=>{c(t,e,((r,s)=>(s=a(e),r?.[0]!==t&&(r=[t,r]),s?.[0]===t?r.push(...s.slice(1)):r.push(s),r)))},f=(t,e)=>c(t[0],e,(e=>!e&&[t,a(0,t.charCodeAt(1))])),u=(t,e)=>c(t[0],e,(e=>e&&[t[0],e,a(0,t.charCodeAt(1))]));const A=(t,e)=>[,(t=+o((t=>46===t||t>=48&&t<=57||(69===t||101===t?2:0))))!=t?s():t];i[46]=t=>!t&&A();for(let t=48;t<=57;t++)i[t]=t=>t?s():A();const g={n:"\n",r:"\r",t:"\t",b:"\b",f:"\f",v:"\v"},C=r=>(o,a,n="")=>{for(o&&s("Unexpected string"),l();(a=e.charCodeAt(t))-r;)92===a?(l(),a=l(),n+=g[a]||a):n+=l();return l()||s("Bad string"),[,n]};i[34]=C(34),i[39]=C(39);const $=t=>Array.isArray(t)?t[0]?m[t[0]](...t.slice(1)):()=>t[1]:$.id(t);$.id=t=>e=>e?.[t];const m={},v=(t,e,r=m[t])=>m[t]=(...t)=>e(...t)||r&&r(...t),y=(t,e,r,o,l)=>"()"===t[0]?y(t[1],e,r):"string"==typeof t?r=>e(r,t,r):"."===t[0]?(o=$(t[1]),l=t[2],t=>e(o(t),l,t)):"["===t[0]?(o=$(t[1]),l=$(t[2]),t=>e(o(t),l(t),t)):r?(t=$(t),r=>e([t(r)],0,r)):()=>s("Bad left value");u("()",170),v("(",((t,e,r)=>(r=e?","===e[0]?(e=e.slice(1).map((t=>t?$(t):err())),t=>e.map((e=>e(t)))):(e=$(e),t=>[e(t)]):()=>[],y(t,((t,e,s)=>t[e](...r(s))),!0)))),u("[]",170),v("[",((t,e)=>e?(t=$(t),e=$(e),r=>t(r)[e(r)]):err())),p(".",170),v(".",((t,e)=>(t=$(t),e=e[0]?e:e[1],r=>t(r)[e]))),f("()",170),v("()",(t=>(!t&&s("Empty ()"),$(t))));const b=(...t)=>(t=t.map($),e=>t.map((t=>t(e))).pop());h(",",10),v(",",b),h(";",5),v(";",b),p("*",120),v("*",((t,e)=>e&&(t=$(t),e=$(e),r=>t(r)*e(r)))),p("/",120),v("/",((t,e)=>e&&(t=$(t),e=$(e),r=>t(r)/e(r)))),p("%",120),v("%",((t,e)=>e&&(t=$(t),e=$(e),r=>t(r)%e(r)))),p("*=",20,!0),v("*=",((t,e)=>(e=$(e),y(t,((t,r,s)=>t[r]*=e(s)))))),p("/=",20,!0),v("/=",((t,e)=>(e=$(e),y(t,((t,r,s)=>t[r]/=e(s)))))),p("%=",20,!0),v("%=",((t,e)=>(e=$(e),y(t,((t,r,s)=>t[r]%=e(s)))))),p("+",110),v("+",((t,e)=>e&&(t=$(t),e=$(e),r=>t(r)+e(r)))),p("-",110),v("-",((t,e)=>e&&(t=$(t),e=$(e),r=>t(r)-e(r)))),p("+=",20,!0),v("+=",((t,e)=>(e=$(e),y(t,((t,r,s)=>t[r]+=e(s)))))),p("-=",20,!0),v("-=",((t,e)=>(e=$(e),y(t,((t,r,s)=>t[r]-=e(s)))))),d("+",140),v("+",((t,e)=>!e&&(t=$(t),e=>+t(e)))),d("-",140),v("-",((t,e)=>!e&&(t=$(t),e=>-t(e)))),c("++",150,(t=>t?["++-",t]:["++",a(149)])),v("++",(t=>y(t,((t,e,r)=>++t[e])))),v("++-",(t=>y(t,((t,e,r)=>t[e]++)))),c("--",150,(t=>t?["--+",t]:["--",a(149)])),v("--",(t=>y(t,((t,e,r)=>--t[e])))),v("--+",(t=>y(t,((t,e,r)=>t[e]--)))),d("~",140),v("~",((t,e)=>!e&&(t=$(t),e=>~t(e)))),p("|",50),v("|",((t,e)=>e&&(t=$(t),e=$(e),r=>t(r)|e(r)))),p("&",70),v("&",((t,e)=>e&&(t=$(t),e=$(e),r=>t(r)&e(r)))),p("^",60),v("^",((t,e)=>e&&(t=$(t),e=$(e),r=>t(r)^e(r)))),p(">>",100),v(">>",((t,e)=>e&&(t=$(t),e=$(e),r=>t(r)>>e(r)))),p("<<",100),v("<<",((t,e)=>e&&(t=$(t),e=$(e),r=>t(r)<<e(r)))),p("==",80),v("==",((t,e)=>e&&(t=$(t),e=$(e),r=>t(r)==e(r)))),p("!=",80),v("!=",((t,e)=>e&&(t=$(t),e=$(e),r=>t(r)!=e(r)))),p(">",90),v(">",((t,e)=>e&&(t=$(t),e=$(e),r=>t(r)>e(r)))),p("<",90),v("<",((t,e)=>e&&(t=$(t),e=$(e),r=>t(r)<e(r)))),p(">=",90),v(">=",((t,e)=>e&&(t=$(t),e=$(e),r=>t(r)>=e(r)))),p("<=",90),v("<=",((t,e)=>e&&(t=$(t),e=$(e),r=>t(r)<=e(r)))),d("!",140),v("!",((t,e)=>!e&&(t=$(t),e=>!t(e)))),p("||",30),v("||",((t,e)=>(t=$(t),e=$(e),r=>t(r)||e(r)))),p("&&",40),v("&&",((t,e)=>(t=$(t),e=$(e),r=>t(r)&&e(r)))),p("=",20,!0),v("=",((t,e)=>(e=$(e),y(t,((t,r,s)=>t[r]=e(s))))));var x=t=>$(r(t));export{u as access,p as binary,$ as compile,x as default,f as group,h as nary,v as operator,r as parse,c as token,d as unary};