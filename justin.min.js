var e,r,t=e=>Array.isArray(e)&&("string"==typeof e[0]||t(e[0])),o=(e,r={},a,s)=>t(e)?("string"==typeof(a=e[0])&&(s=n[a]),"function"!=typeof(a=s||o(a,r))?a:a.call(...e.map((e=>o(e,r))))):e&&"string"==typeof e?'"'===e[0]?e.slice(1,-1):"@"===e[0]?e.slice(1):e in r?r[e]:e:e,n=o.operator={"!":e=>!e,"++":e=>++e,"--":e=>--e,".":(...e)=>e.reduce(((e,r)=>e&&e[r])),"%":(...e)=>e.reduce(((e,r)=>e%r)),"/":(...e)=>e.reduce(((e,r)=>e/r)),"*":(...e)=>e.reduce(((e,r)=>e*r)),"+":(...e)=>e.reduce(((e,r)=>e+r)),"-":(...e)=>e.length<2?-e:e.reduce(((e,r)=>e-r)),">>>":(e,r)=>e>>>r,">>":(e,r)=>e>>r,"<<":(e,r)=>e<<r,">=":(e,r)=>e>=r,">":(e,r)=>e>r,"<=":(e,r)=>e<=r,"<":(e,r)=>e<r,"!=":(e,r)=>e!=r,"==":(e,r)=>e==r,"&":(e,r)=>e&r,"^":(e,r)=>e^r,"|":(e,r)=>e|r,"&&":(...e)=>e.every(Boolean),"||":(...e)=>e.some(Boolean),",":(...e)=>e.reduce(((e,r)=>r))},a=(t,o)=>(r=t,e=0,o=c(),e<r.length?s():o),s=(t="Bad syntax")=>{throw Error(t+" `"+r[e]+"` at "+e)},u=(t=1,o=e)=>{if("number"==typeof t)e+=t;else for(;t(p());)e++;return r.slice(o,e)||i},p=(t=0)=>r.charCodeAt(e+t),f=(t=1)=>r.substr(e,t),i="",c=(r=0,t=a.space(),o,n=e,u=0,p,f)=>{for(;n===e&&u<a.token.length;)o=a.token[u++](t);for(;(t=a.space())&&(p=l[t]||s())&&(f=p(t,o,r));)(o=f).indexOf(i)>=0&&s();return o},l=(a.space=r=>{for(;(r=p())<=32;)e++;return r},a.token=[e=>(e=u((e=>e>47&&e<58||46===e)))?((69===p()||101===p())&&(e+=u(2)+u((e=>e>=48&&e<=57))),isNaN(e=parseFloat(e))?s("Bad number"):e):i,(e,r)=>34===e?u()+u((r=>r-e))+u():i,r=>40===r?(++e,r=c(),++e,r===i?s():r):i,e=>u((e=>e>=48&&e<=57||e>=65&&e<=90||e>=97&&e<=122||36==e||95==e||e>=192&&215!=e&&247!=e))],[]),d=(r,t=0,o=1,n=l[r])=>l[r]=(r,s,p,f,i,l)=>{if(p<t&&(f="number"==typeof o?o:o(s))){if("number"==typeof f)for(i=[l=u(f|=0),s,c(t)];a.space()==r&&(u(f)==l||(e-=f,0));)i.push(c(t));else i=f;return i}if(n)return n(r,s,p)};d(44,1),d(124,6),d(124,4,(e=>124==p(1)&&2)),d(38,8),d(38,5,(e=>38==p(1)&&2)),d(94,7),d(61,9,(e=>p(1)==p(2)?3:2)),d(33,9,(e=>p(1)==p(2)?3:2)),d(62,10,(e=>61==p(1)?2:1)),d(62,11,(e=>62==p(1)&&(p(2)===p(1)?3:2))),d(60,10,(e=>61==p(1)?2:1)),d(60,11,(e=>60==p(1)&&2)),d(43,12),d(45,12),d(43,15,(e=>(e===i||43==p(1))&&[u(43==p(1)?2:1),e===i?c(14):e])),d(45,15,(e=>(e===i||45==p(1))&&[u(45==p(1)?2:1),e===i?c(14):e])),d(33,15,(e=>e===i&&[u(1),c(14)])),d(42,13),d(47,13),d(37,13),d(46,18,((e,r)=>[u(),e,"string"==typeof(r=c(18))?'"'+r+'"':r])),d(91,18,(r=>(e++,r=[".",r,c()],e++,r))),d(40,18,((r,t)=>(e++,t=c(),e++,Array.isArray(t)&&","===t[0]?(t[0]=r,t):t===i?[r]:[r,t]))),d(93),d(41),d(59,1),a.token.splice(3,0,(e=>!(116!==e||"true"!==f(4)||!u(4))||(102!==e||"false"!==f(5)||!u(5))&&(110===e&&"null"===f(4)&&u(4)?null:void(117===e&&"undefined"===f(9)&&u(9))))),a.token[1]=(e,r,t,o)=>{if(34===e||39===e){for(r=f(),u(),o="";(t=p())-e;)92===t?(u(),o+=y[f()]||f()):o+=f(),u();return u(),r+o+r}};var y={n:"\n",r:"\r",t:"\t",b:"\b",f:"\f",v:"\v"};o.operator["**"]=(...e)=>e.reduceRight(((e,r)=>Math.pow(r,e))),d(42,14,(e=>42==p(1)&&2)),d(126,13,(e=>[u(),c(15)])),o.operator["~"]=e=>~e,o.operator["?:"]=(e,r,t)=>e?r:t,d(63,3,(e=>{let r,t;return u(),a.space(),r=c(0),58!==p()&&err("Expected :"),u(),a.space(),t=c(0),["?:",e,r,t]})),d(58),a.space=e=>{for(;(e=p())<=32;)u(),47===p()&&(42===p(1)?(u(2),u((e=>42!==e&&47!==p(1))),u(2)):47===p(1)&&(u(2),u((e=>e>=32))));return e},o.operator.in=(e,r)=>e in r,d(105,10,(e=>110===p(1)&&p(2)<=32&&[u(2),'"'+e+'"',c(10)])),o.operator["["]=(...e)=>Array(...e),a.token.unshift(((e,r,t)=>91===e?(u(),r=(t=c())===i?["["]:","===t[0]?(t[0]="[",t):["[",t],u(),r):i)),a.token.unshift(((e,r)=>123===e?(u(),r=h(["{",c()]),u(),r):null)),d(125),d(58,4,1),o.operator["{"]=(...e)=>Object.fromEntries(e),o.operator[":"]=(e,r)=>[e,r];var h=(e,r)=>(e[1]===i?r=[]:":"==e[1][0]?r=[e[1]]:","==e[1][0]&&(r=e[1].slice(1)),["{",...r]),b=a;export{b as default,o as evaluate,a as parse};