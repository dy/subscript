var e,r,a=(a,o)=>(r=a,e=0,o=c(),e<r.length?t():o),t=(a="Bad syntax")=>{throw Error(a+" `"+r[e]+"` at "+e)},o=(a=1,t=e)=>{if("number"==typeof a)e+=a;else for(;a(n());)e++;return r.slice(t,e)||s},n=(a=0)=>r.charCodeAt(e+a),s="",c=(r=0,o,c=a.space(),i,f=e,l=0,u,d)=>{for(;f===e&&l<a.token.length;)i=a.token[l++](c);for(;(c=a.space())!==o&&(u=p[c])&&(d=u(c,i,r));)(i=d).indexOf(s)>=0&&t("Bad expression");return!r&&o&&n()!=o&&t("Unclosed paren"),i},p=(a.space=r=>{for(;(r=n())<=32;)e++;return r},a.token=[e=>(e=o((e=>e>47&&e<58||46===e)))?((69===n()||101===n())&&(e+=o(2)+o((e=>e>=48&&e<=57))),isNaN(e=parseFloat(e))?t("Bad number"):e):s,(e,r)=>34===e?o()+o((r=>r-e))+o():s,r=>40===r?(++e,r=c(0,41),++e,r===s?t():r):s,e=>o((e=>e>=48&&e<=57||e>=65&&e<=90||e>=97&&e<=122||36==e||95==e||e>=192&&215!=e&&247!=e))],[]);p[44]=0,p[124]=(e,r,a)=>124==n(1)&&a<1&&[o(2),r,c(1)]||a<3&&[o(),r,c(3)],p[38]=(e,r,a)=>38==n(1)&&a<2&&[o(2),r,c(2)]||a<5&&[o(),r,c(5)],p[94]=(e,r,a)=>a<4&&[o(1),r,c(4)],p[61]=p[33]=(e,r,a)=>n(1)==e&&a<6&&[o(n(1)==n(2)?3:2),r,c(6)],p[60]=p[62]=(e,r,a)=>n(1)==e&&a<8&&[o(n(2)==e?3:2),r,c(8)]||a<7&&[o(n(1)==e?2:1),r,c(7)],p[43]=p[45]=(e,r,a)=>n(1)==e&&a<11&&[o(2),r==s?r:c(11)]||a<9&&[o(),r,c(9)],p[42]=p[47]=p[37]=(e,r,a)=>a<10&&[o(),r,c(10)],p[46]=p[91]=p[40]=(r,a,t,n)=>46==r?[o(),a,"string"==typeof(n=c(t))?'"'+n+'"':n]:91==r?(e++,a=[".",a,c(0,93)],e++,a):40==r?(e++,n=c(0,41),e++,Array.isArray(n)&&","===n[0]?(n[0]=a,n):n===s?[a]:[a,n]):s;var i=a,f=e=>Array.isArray(e)&&("string"==typeof e[0]||f(e[0])),l=(e,r={},a,t)=>f(e)?("string"==typeof(a=e[0])&&(t=u[a]),"function"!=typeof(a=t||l(a,r))?a:a.call(...e.map((e=>l(e,r))))):e&&"string"==typeof e?'"'===e[0]?e.slice(1,-1):"@"===e[0]?e.slice(1):e in r?r[e]:e:e,u=l.operator={"!":e=>!e,"++":e=>++e,"--":e=>--e,".":(...e)=>e.reduce(((e,r)=>e&&e[r])),"%":(...e)=>e.reduce(((e,r)=>e%r)),"/":(...e)=>e.reduce(((e,r)=>e/r)),"*":(...e)=>e.reduce(((e,r)=>e*r)),"+":(...e)=>e.reduce(((e,r)=>e+r)),"-":(...e)=>e.length<2?-e:e.reduce(((e,r)=>e-r)),">>>":(e,r)=>e>>>r,">>":(e,r)=>e>>r,"<<":(e,r)=>e<<r,">=":(e,r)=>e>=r,">":(e,r)=>e>r,"<=":(e,r)=>e<=r,"<":(e,r)=>e<r,"!=":(e,r)=>e!=r,"==":(e,r)=>e==r,"&":(e,r)=>e&r,"^":(e,r)=>e^r,"|":(e,r)=>e|r,"&&":(...e)=>e.every(Boolean),"||":(...e)=>e.some(Boolean),",":(...e)=>e.reduce(((e,r)=>r))},d=l,y=e=>(e="string"==typeof e?i(e):e,r=>d(e,r));export{y as default,d as evaluate,i as parse};