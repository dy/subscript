var e,r,t=e=>Array.isArray(e)&&("string"==typeof e[0]||t(e[0])),o=(e,r={},a,s)=>t(e)?("string"==typeof(a=e[0])&&(s=n[a]),"function"!=typeof(a=s||o(a,r))?a:a.call(...e.map((e=>o(e,r))))):e&&"string"==typeof e?'"'===e[0]?e.slice(1,-1):"@"===e[0]?e.slice(1):e in r?r[e]:e:e,a=e=>(...r)=>r.reduce(e),n=o.operator={"!":e=>!e,"++":e=>++e,"--":e=>--e,".":a(((e,r)=>e&&e[r])),"%":a(((e,r)=>e%r)),"/":a(((e,r)=>e/r)),"*":a(((e,r)=>e*r)),"+":a(((e,r)=>e+r)),"-":(...e)=>e.length<2?-e:e.reduce(((e,r)=>e-r)),">>>":(e,r)=>e>>>r,">>":(e,r)=>e>>r,"<<":(e,r)=>e<<r,">=":(e,r)=>e>=r,">":(e,r)=>e>r,"<=":(e,r)=>e<=r,"<":(e,r)=>e<r,"!=":(e,r)=>e!=r,"==":(e,r)=>e==r,"&":(e,r)=>e&r,"^":(e,r)=>e^r,"|":(e,r)=>e|r,"&&":(...e)=>e.every(Boolean),"||":(...e)=>e.some(Boolean),",":a(((e,r)=>r))},s=15,p=(t,o)=>(r=t,e=0,o=c(),e<r.length?i():o),i=(t="Bad syntax")=>{throw Error(t+" `"+r[e]+"` at "+e)},l=(t=1,o=e)=>{if("number"==typeof t)e+=t;else for(;t(f());)e++;return r.slice(o,e)},f=(t=0)=>r.charCodeAt(e+t),u=(t=1)=>r.substr(e,t),c=(e=0,r=p.space(),t,o=0,a,n)=>{for(;o<p.token.length&&!(t=p.token[o++](r)););for(;(r=p.space())&&(a=h[r]||i())&&(n=a(t,e));)t=n;return t},h=(p.space=r=>{for(;(r=f())<=32;)e++;return r},p.token=[e=>(e=l((e=>e>47&&e<58||46===e)))&&((69===f()||101===f())&&(e+=l(2)+l((e=>e>=48&&e<=57))),isNaN(e=new Number(e))?i("Bad number"):e),(e,r)=>34===e&&l()+l((r=>r-e))+l(),e=>l((e=>e>=48&&e<=57||e>=65&&e<=90||e>=97&&e<=122||36==e||95==e||e>=192&&215!=e&&247!=e))],[]),d=(r,t=0,o=0,a,n=r.charCodeAt(0),s=r.length,i=h[n],d=r.toUpperCase()!==r,y)=>(y=s<2?d?()=>f(1)<=32:()=>1:d?()=>u(s)==r&&f(s)<=32:()=>u(s)==r,a=o?o>0?e=>e&&[l(s),e]:o<0?e=>!e&&[l(s),c(t-1)]:o:o=>{o=[r,o];do{e+=s,o.push(c(t))}while(p.space()==n&&y());return o},h[n]=(e,r)=>r<t&&y()&&a(e)||i&&i(e,r));for(let r=0,t=[",",1,,"|",6,,"||",4,,"&",8,,"&&",5,,"^",7,,"==",9,,"!=",9,,">",10,,">=",10,,">>",11,,">>>",11,,"<",10,,"<=",10,,"<<",11,,"+",12,,"+",s,-1,"++",s,-1,"++",s,1,"-",12,,"-",s,-1,"--",s,-1,"--",s,1,"!",s,-1,"*",13,,"/",13,,"%",13,,".",18,(e,r)=>[l(),e,"string"==typeof(r=c(18))?'"'+r+'"':r],"[",18,r=>(e++,r=[".",r,c()],e++,r),"]",,,"(",18,(r,t)=>(e++,t=c(),e++,Array.isArray(t)&&","===t[0]?(t[0]=r,t):t?[r,t]:[r]),"(",19,(r,t)=>!r&&(++e,t=c(),++e,t),")",,,];r<t.length;)d(t[r++],t[r++],t[r++]);d(";",1),d("===",9),d("!==",9),p.token.splice(3,0,(e=>!(116!==e||"true"!==u(4)||!l(4))||(102!==e||"false"!==u(5)||!l(5))&&(110===e&&"null"===u(4)&&l(4)?null:void(117===e&&"undefined"===u(9)&&l(9))))),p.token[1]=(e,r,t,o)=>{if(34===e||39===e){for(r=u(),l(),o="";(t=f())-e;)92===t?(l(),o+=y[u()]||u()):o+=u(),l();return l(),r+o+r}};var y={n:"\n",r:"\r",t:"\t",b:"\b",f:"\f",v:"\v"};o.operator["**"]=(...e)=>e.reduceRight(((e,r)=>Math.pow(r,e))),d("**",14),d("~",13,-1),o.operator["~"]=e=>~e,o.operator["?:"]=(e,r,t)=>e?r:t,d("?",3,(e=>{let r,t;return l(),p.space(),r=c(0),58!==f()&&i("Expected :"),l(),p.space(),t=c(0),["?:",e,r,t]})),p.space=e=>{for(;(e=f())<=32;)l(),47===f()&&(42===f(1)?(l(2),l((e=>42!==e&&47!==f(1))),l(2)):47===f(1)&&(l(2),l((e=>e>=32))));return e},o.operator.in=(e,r)=>e in r,d("in",10,(e=>f(2)<=32&&[l(2),'"'+e+'"',c(10)])),o.operator["["]=(...e)=>Array(...e),p.token.unshift(((e,r,t)=>91===e&&(l(),r=(t=c())?","===t[0]?(t[0]="[",t):["[",t]:["["],l(),r))),p.token.unshift(((e,r)=>123===e&&(l(),r=g(["{",c()]),l(),r))),d("}"),d(":",4),o.operator["{"]=(...e)=>Object.fromEntries(e),o.operator[":"]=(e,r)=>[e,r];var g=(e,r)=>(e[1]?":"==e[1][0]?r=[e[1]]:","==e[1][0]&&(r=e[1].slice(1)):r=[],["{",...r]),v=p;export{v as default,o as evaluate,p as parse};