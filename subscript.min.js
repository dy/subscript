var e,r,l=(r="Bad syntax "+a())=>{throw Error(r+" at "+e)},n=(l=1,n=e)=>{if("number"==typeof l)e+=l;else for(;l(t());)e++;return n<e?r.slice(n,e):void 0},u=r=>{for(;(r=t())<=32;)e++;return r},t=(l=0)=>r.charCodeAt(e+l),a=(l=1)=>r.substr(e,l),o=(r=0,l,n=u(),t,a=e,o=0,s)=>{for(;a===e&&o<i.length;)t=i[o++](n);for(o=Math.max(f[n=u()]||0,r);o<d.length&&!(n===l||o<r);)(s=d[o++](t,n,o,l))&&(t=s,o=Math.max(f[n=u()]||0,r));return t},s=e=>n((e=>e>=48&&e<=57||e>=65&&e<=90||e>=97&&e<=122||36==e||95==e||e>=192)),i=[e=>{if(e=n((e=>e>47&&e<58||46===e)))return(69===t()||101===t())&&(e+=n(2)+n((e=>e>=48&&e<=57))),isNaN(e=parseFloat(e))?l("Bad number"):e},(r,l)=>40===r?(e++,l=o(0,41),e++,l):void 0,(r,l)=>34===r?(l=a(),e++,l+n((e=>e-r))+(e++,l)):void 0,s],d=[(e,r,l,t)=>{if(44===r){e=[",",e];do{n(),e.push(o(l,t))}while(44===u());return e}},(e,r,l,u)=>124===r&&t(1)===r?[n(2),e,o(l,u)]:null,(e,r,l,u)=>38===r&&t(1)===r?[n(2),e,o(l,u)]:null,(e,r,l,u)=>124===r?[n(),e,o(l,u)]:null,(e,r,l,u)=>94===r?[n(),e,o(l,u)]:null,(e,r,l,u)=>38===r?[n(),e,o(l,u)]:null,(e,r,l,u)=>61!==t(1)||61!==r&&33!==r?null:[n(2),e,o(l,u)],(e,r,l,u)=>62!==r&&60!==r||r===t(1)?null:[n(),e,o(l,u)],(e,r,l,u)=>60!==r&&62!==r||r!==t(1)?null:[n(r===t(2)?3:2),e,o(l,u)],(e,r,l,u)=>43!==r&&45!==r||null==e||t(1)===r?null:[n(),e,o(l,u)],(e,r,l,u)=>42===r&&42!==t(1)||47===r||37===r?[n(),e,o(l,u)]:null,(e,r,l,u)=>43!==r&&45!==r||t(1)!==r?null:[n(2),e??o(l-1,u)],(e,r,l,u)=>43!==r&&45!==r&&33!==r||null!=e?null:[n(1),o(l-1,u)],(r,l,t,a)=>46===l?[n(),r,'"'+(u(),s()+'"')]:91===l?(e++,r=[".",r,o(0,93)],e++,r):40===l?(e++,a=o(0,41),e++,Array.isArray(a)&&","===a[0]?(a[0]=r,a):null==a?[r]:[r,a]):null],f=[];f[44]=0,f[124]=1,f[38]=2,f[94]=4,f[61]=f[33]=6,f[60]=f[62]=7,f[43]=f[45]=9,f[42]=f[47]=f[37]=10,f[46]=f[91]=f[40]=13;var c=(n,u)=>(r=n,e=0,u=o(),e<r.length?l():u),p=e=>Array.isArray(e)&&("string"==typeof e[0]||p(e[0])),y=(e,r={},l,n)=>p(e)?("string"==typeof(l=e[0])&&(n=h[l]),"function"!=typeof(l=n||y(l,r))?l:l.call(...e.map((e=>y(e,r))))):e&&"string"==typeof e?'"'===e[0]?e.slice(1,-1):"@"===e[0]?e.slice(1):e in r?r[e]:e:e,h=y.operator={"!":e=>!e,"++":e=>++e,"--":e=>--e,".":(...e)=>e.reduce(((e,r)=>e&&e[r])),"%":(...e)=>e.reduce(((e,r)=>e%r)),"/":(...e)=>e.reduce(((e,r)=>e/r)),"*":(...e)=>e.reduce(((e,r)=>e*r)),"+":(...e)=>e.reduce(((e,r)=>e+r)),"-":(...e)=>e.length<2?-e:e.reduce(((e,r)=>e-r)),">>>":(e,r)=>e>>>r,">>":(e,r)=>e>>r,"<<":(e,r)=>e<<r,">=":(e,r)=>e>=r,">":(e,r)=>e>r,"<=":(e,r)=>e<=r,"<":(e,r)=>e<r,"!=":(e,r)=>e!=r,"==":(e,r)=>e==r,"&":(e,r)=>e&r,"^":(e,r)=>e^r,"|":(e,r)=>e|r,"&&":(...e)=>e.every(Boolean),"||":(...e)=>e.some(Boolean),",":(...e)=>e.reduce(((e,r)=>r))},g=y,v=e=>(e="string"==typeof e?c(e):e,r=>g(e,r));export{v as default,g as evaluate,c as parse};