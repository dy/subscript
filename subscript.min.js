var e,r,a=(a,l)=>(r=a,e=0,l=n(),e<r.length?t():l),t=(a="Bad syntax "+r[e])=>{throw Error(a+" at "+e)},l=(a=1,t=e)=>{if("number"==typeof a)e+=a;else for(;a(o());)e++;return t<e?r.slice(t,e):void 0},o=(a=0)=>r.charCodeAt(e+a),n=(r=0,t,l=a.space(),o,n=e,s=0,p)=>{for(;n===e&&s<a.token.length;)o=a.token[s++](l);for(s=Math.max(0|u[l=a.space()],r);s<a.operator.length&&!(l===t||s<r);)(p=a.operator[s++](o,l,s,t))&&(o=p,s=Math.max(0|u[l=a.space()],r));return o},s=(t,o,s,u,p=[r[e],t])=>{do{l(),p.push(n(s,u))}while(a.space()===o);return p},u=[];u[44]=0,u[124]=1,u[38]=2,u[94]=4,u[61]=u[33]=6,u[60]=u[62]=7,u[43]=u[45]=9,u[42]=u[47]=u[37]=10,u[46]=u[91]=u[40]=13,a.space=r=>{for(;(r=o())<=32;)e++;return r},a.token=[e=>{if(e=l((e=>e>47&&e<58||46===e)))return(69===o()||101===o())&&(e+=l(2)+l((e=>e>=48&&e<=57))),isNaN(e=parseFloat(e))?t("Bad number"):e},(e,r)=>34===e&&l()+l((r=>r-e))+l(),(r,a)=>40===r&&(e++,a=n(0,41),e++,a),e=>(e=l((e=>e>=48&&e<=57||e>=65&&e<=90||e>=97&&e<=122||36==e||95==e||e>=192)),a.literal.hasOwnProperty(e)?a.literal[e]:e)],a.literal={null:null,true:!0,false:!1},a.operator=[(e,r,a,t)=>44===r&&s(e,r,a,t),(e,r,a,t)=>124===r&&o(1)===r&&[l(2),e,n(a,t)],(e,r,a,t)=>38===r&&o(1)===r&&[l(2),e,n(a,t)],(e,r,a,t)=>124===r&&[l(),e,n(a,t)],(e,r,a,t)=>94===r&&[l(),e,n(a,t)],(e,r,a,t)=>38===r&&[l(),e,n(a,t)],(e,r,a,t)=>(61===r||33===r)&&61===o(1)&&[l(2),e,n(a,t)],(e,r,a,t)=>(62===r||60===r)&&r!==o(1)&&[l(),e,n(a,t)],(e,r,a,t)=>(60===r||62===r)&&r===o(1)&&[l(r===o(2)?3:2),e,n(a,t)],(e,r,a,t)=>(43===r||45===r)&&null!=e&&o(1)!==r&&s(e,r,a,t),(e,r,a,t)=>(42===r&&42!==o(1)||47===r||37===r)&&s(e,r,a,t),(e,r,a,t)=>(43===r||45===r)&&o(1)===r&&[l(2),e??n(a-1,t)],(e,r,a,t)=>(43===r||45===r||33===r)&&null==e&&[l(1),n(a-1,t)],(r,a,t,o)=>46===a?[l(),r,'"'+n(t)+'"']:91===a?(e++,r=[".",r,n(0,93)],e++,r):40===a?(e++,o=n(0,41),e++,Array.isArray(o)&&","===o[0]?(o[0]=r,o):null==o?[r]:[r,o]):null];var p=a,i=e=>Array.isArray(e)&&("string"==typeof e[0]||i(e[0])),c=(e,r={},a,t)=>i(e)?("string"==typeof(a=e[0])&&(t=f[a]),"function"!=typeof(a=t||c(a,r))?a:a.call(...e.map((e=>c(e,r))))):e&&"string"==typeof e?'"'===e[0]?e.slice(1,-1):"@"===e[0]?e.slice(1):e in r?r[e]:e:e,f=c.operator={"!":e=>!e,"++":e=>++e,"--":e=>--e,".":(...e)=>e.reduce(((e,r)=>e&&e[r])),"%":(...e)=>e.reduce(((e,r)=>e%r)),"/":(...e)=>e.reduce(((e,r)=>e/r)),"*":(...e)=>e.reduce(((e,r)=>e*r)),"+":(...e)=>e.reduce(((e,r)=>e+r)),"-":(...e)=>e.length<2?-e:e.reduce(((e,r)=>e-r)),">>>":(e,r)=>e>>>r,">>":(e,r)=>e>>r,"<<":(e,r)=>e<<r,">=":(e,r)=>e>=r,">":(e,r)=>e>r,"<=":(e,r)=>e<=r,"<":(e,r)=>e<r,"!=":(e,r)=>e!=r,"==":(e,r)=>e==r,"&":(e,r)=>e&r,"^":(e,r)=>e^r,"|":(e,r)=>e|r,"&&":(...e)=>e.every(Boolean),"||":(...e)=>e.some(Boolean),",":(...e)=>e.reduce(((e,r)=>r))},d=c,y=e=>(e="string"==typeof e?p(e):e,r=>d(e,r));export{y as default,d as evaluate,p as parse};