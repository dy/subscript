let e,t,r=r=>(e=0,t=r,r=n(),t[e]?l():r||""),l=(r="Bad syntax",l=t[e],a=t.slice(0,e).split("\n"),n=a.pop())=>{throw SyntaxError(`${r} \`${l}\` at ${a.length}:${n.length}`)},a=(r=1,l=e,a)=>{if("number"==typeof r)e+=r;else for(;a=r(t.charCodeAt(e));)e+=a;return t.slice(l,e)},n=(t=0,a,n,s,h,o)=>{for(;(n=r.space())&&(h=((o=p[n])&&o(s,t))??(!s&&r.id()));)s=h;return a&&(n==a?e++:l()),s},s=e=>e>=48&&e<=57||e>=65&&e<=90||e>=97&&e<=122||36==e||95==e||e>=192&&215!=e&&247!=e,h=r.space=r=>{for(;(r=t.charCodeAt(e))<=32;)e++;return r},o=r.id=e=>a(s),p=[],c=(r,l=32,a,n=r.charCodeAt(0),h=r.length,o=p[n],c=r.toUpperCase()!==r)=>p[n]=(n,p,i=e)=>p<l&&(h<2||t.substr(e,h)==r)&&(!c||!s(t.charCodeAt(e+h)))&&(e+=h,a(n,p))||(e=i,o?.(n,p)),i=(e,t,r)=>c(e,t,((l,a)=>l&&(a=n(t-!!r))&&[e,l,a])),g=(e,t,r)=>c(e,t,(l=>r?l&&[e,l]:!l&&(l=n(t-1))&&[e,l])),f=(e,t)=>c(e,t,((r,l)=>r&&(l=n(t))&&(r[0]===e&&r[2]?(r.push(l),r):[e,r,l])));const d=e=>Array.isArray(e)?u[e[0]](...e.slice(1)):t=>t?.[e],u={},A=(e,t,r=u[e])=>u[e]=(...e)=>t(...e)||r&&r(...e),y=e=>(e=r(e),t=>(e.call?e:e=d(e))(t)),C=(e,t,r)=>r[0]||r[1]?(t?c(e,t,r[0]):p[e.charCodeAt(0)||1]=r[0],A(e,r[1])):r.length?r.length>1?(i(e,Math.abs(t),t<0),A(e,((e,t)=>t&&(e=d(e),t=d(t),e.length||t.length?l=>r(e(l),t(l)):(e=r(e(),t()),()=>e))))):(g(e,t),A(e,((e,t)=>!t&&((e=d(e)).length?t=>r(e(t)):(e=r(e()),()=>e))))):(f(e,t),A(e,((...e)=>(e=e.map(d),t=>r(...e.map((e=>e(t)))))))),m=e=>e?l():["",(e=+a((e=>46===e||e>=48&&e<=57||(69===e||101===e?2:0))))!=e?l():e],$=(e,t,r,l)=>[e,t,[r=>r?["++"===e?"-":"+",[e,r],["",1]]:[e,n(t-1)],l=(e,t)=>"("===e[0]?l(e[1]):"."===e[0]?(t=e[2],e=d(e[1]),l=>r(e(l),t)):"["===e[0]?([,e,t]=e,e=d(e),t=d(t),l=>r(e(l),t(l))):t=>r(t,e)]],b=["",,[,e=>()=>e],'"',,[e=>e?l():["",(a()+a((e=>e-34?1:0))+(a()||l("Bad string"))).slice(1,-1)]],".",,[e=>!e&&m()],...Array(10).fill(0).flatMap(((e,t)=>[""+t,0,[m]])),",",1,(...e)=>e[e.length-1],"||",4,(...e)=>{let t,r=0;for(;!t&&r<e.length;)t=e[r++];return t},"&&",5,(...e)=>{let t=0,r=!0;for(;r&&t<e.length;)r=e[t++];return r},"+",12,(e,t)=>e+t,"-",12,(e,t)=>e-t,"*",13,(e,t)=>e*t,"/",13,(e,t)=>e/t,"%",13,(e,t)=>e%t,"|",6,(e,t)=>e|t,"&",8,(e,t)=>e&t,"^",7,(e,t)=>e^t,"==",9,(e,t)=>e==t,"!=",9,(e,t)=>e!=t,">",10,(e,t)=>e>t,">=",10,(e,t)=>e>=t,"<",10,(e,t)=>e<t,"<=",10,(e,t)=>e<=t,">>",11,(e,t)=>e>>t,">>>",11,(e,t)=>e>>>t,"<<",11,(e,t)=>e<<t,"+",15,e=>+e,"-",15,e=>-e,"!",15,e=>!e,...$("++",15,((e,t)=>++e[t])),...$("--",15,((e,t)=>--e[t])),"[",18,[e=>e&&["[",e,n(0,93)||l()],(e,t)=>t&&(e=d(e),t=d(t),r=>e(r)[t(r)])],".",18,[(e,t)=>e&&(t=n(18))&&[".",e,t],(e,t)=>(e=d(e),t=t[0]?t:t[1],r=>e(r)[t])],"(",18,[e=>!e&&["(",n(0,41)||l()],d],"(",18,[e=>e&&["(",e,n(0,41)||""],(e,t,r,l)=>null!=t&&(l=""==t?()=>[]:","===t[0]?(t=t.slice(1).map(d),e=>t.map((t=>t(e)))):(t=d(t),e=>[t(e)]),"."===e[0]?(r=e[2],e=d(e[1]),t=>e(t)[r](...l(t))):"["===e[0]?(r=d(e[2]),e=d(e[1]),t=>e(t)[r(t)](...l(t))):(e=d(e),t=>e(t)(...l(t))))]];for(;b[2];)C(...b.splice(0,3));export{i as binary,d as compile,t as cur,y as default,l as err,n as expr,o as id,e as idx,s as isId,p as lookup,f as nary,A as operator,u as operators,r as parse,C as set,a as skip,h as space,c as token,g as unary};