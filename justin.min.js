let r,t,e=e=>(r=0,t=e,e=a(),t[r]?l():e||""),l=(e="Bad syntax",l=t.slice(0,r).split("\n"),n=l.pop())=>{const i=t.slice(r-108,r).split("\n").pop(),a=t.slice(r,r+108).split("\n").shift();throw EvalError(`${e} at ${l.length}:${n.length} \`${r>=108?"…":""}${i}┃${a}\``,"font-weight: bold")},n=(e,l=r,n)=>{for(;n=e(t.charCodeAt(r));)r+=n;return t.slice(l,r)},i=(e=1,l=r)=>(r+=e,t.slice(l,r)),a=(t=0,i)=>{let a,p,c,d;for(;(a=o())&&(c=((d=s[a])&&d(p,t))??(!p&&n(e.id)));)p=c;return i&&(a==i?r++:l()),p},o=e=>{for(;(e=t.charCodeAt(r))<=32;)r++;return e};e.id=r=>r>=48&&r<=57||r>=65&&r<=90||r>=97&&r<=122||36==r||95==r||r>=192&&215!=r&&247!=r;let s=[],p=(n,i=32,a,o=n.charCodeAt(0),p=n.length,c=s[o],d=n.toUpperCase()!==n)=>s[o]=(o,s,u,f=r)=>(u?n==u:(p<2||t.substr(r,p)==n)&&(u=n))&&s<i&&!(d&&e.id(t.charCodeAt(r+p)))&&(r+=p,a(o)||(r=f,!c&&l()))||c?.(o,s,u),c=(r,t,e=!1)=>p(r,t,((l,n)=>l&&(n=a(t-(e?.5:0)))&&[r,l,n])),d=(r,t,e)=>p(r,t,(l=>e?l&&[r,l]:!l&&(l=a(t-.5))&&[r,l])),u=(r,t,e)=>{p(r,t,((e,l)=>(l=a(t),e?.[0]!==r&&(e=[r,e||null]),l?.[0]===r?e.push(...l.slice(1)):e.push(l||null),e)))},f=(r,t)=>p(r[0],t,(t=>!t&&[r,a(0,r.charCodeAt(1))])),h=(r,t)=>p(r[0],t,(t=>t&&[r,t,a(0,r.charCodeAt(1))||null]));const A=r=>Array.isArray(r)?r[0]?g[r[0]].call(...r):()=>r[1]:A.id(r);A.id=r=>t=>t?.[r];const g={},m=(r,t,e=g[r])=>g[r]=(...r)=>t(...r)||e?.(...r),y=(r,t,e,n,i)=>"()"===r[0]&&2==r.length?y(r[1],t,e):"string"==typeof r?e=>t(e,r,e):"."===r[0]?(n=A(r[1]),i=r[2],r=>t(n(r),i,r)):"[]"===r[0]&&3===r.length?(n=A(r[1]),i=A(r[2]),r=>t(n(r),i(r),r)):e?(r=A(r),e=>t([r(e)],0,e)):()=>l("Bad left value"),v=(r,t)=>[,(r=+n((r=>46===r||r>=48&&r<=57||(69===r||101===r?2:0))))!=r?l():r];s[46]=r=>!r&&v();for(let r=48;r<=57;r++)s[r]=r=>r?l():v();const C={n:"\n",r:"\r",t:"\t",b:"\b",f:"\f",v:"\v"},b=e=>(n,a,o="")=>{for(n&&l("Unexpected string"),i();(a=t.charCodeAt(r))-e;)92===a?(i(),a=i(),o+=C[a]||a):o+=i();return i()||l("Bad string"),[,o]};s[34]=b(34),s[39]=b(39),h("()",170),m("()",((r,t,e)=>void 0!==t&&(e=t?","===t[0]?(t=t.slice(1).map((r=>r?A(r):err())),r=>t.map((t=>t(r)))):(t=A(t),r=>[t(r)]):()=>[],y(r,((r,t,l)=>r[t](...e(l))),!0)))),h("[]",170),m("[]",((r,t)=>t?(r=A(r),t=A(t),e=>r(e)[t(e)]):err())),c(".",170),m(".",((r,t)=>(r=A(r),t=t[0]?t:t[1],e=>r(e)[t]))),f("()",170),m("()",((r,t)=>void 0===t&&(!r&&l("Empty ()"),A(r))));const $=(...r)=>(r=r.map(A),t=>r.map((r=>r(t))).pop());function N(r){if(!r)return"";if(Array.isArray(r)){const[t,...e]=r;return t?"[]"==t||"{}"==t||"()"==t?(e.length>1?N(e.shift()):"")+t[0]+N(e[0])+t[1]:1===e.length?t+N(e[0]):2===e.length?N(e[0])+("."===t?t:" "+t+" ")+N(e[1]):e.filter(Boolean).map((r=>N(r))).join(t+"\n"):JSON.stringify(e[0])}return r}u(",",10),m(",",$),u(";",5),m(";",$),c("=",20,!0),m("=",((r,t)=>(t=A(t),y(r,((r,e,l)=>r[e]=t(l)))))),c("*",120),m("*",((r,t)=>t&&(r=A(r),t=A(t),e=>r(e)*t(e)))),c("/",120),m("/",((r,t)=>t&&(r=A(r),t=A(t),e=>r(e)/t(e)))),c("%",120),m("%",((r,t)=>t&&(r=A(r),t=A(t),e=>r(e)%t(e)))),c("*=",20,!0),m("*=",((r,t)=>(t=A(t),y(r,((r,e,l)=>r[e]*=t(l)))))),c("/=",20,!0),m("/=",((r,t)=>(t=A(t),y(r,((r,e,l)=>r[e]/=t(l)))))),c("%=",20,!0),m("%=",((r,t)=>(t=A(t),y(r,((r,e,l)=>r[e]%=t(l)))))),c("+",110),m("+",((r,t)=>t&&(r=A(r),t=A(t),e=>r(e)+t(e)))),c("-",110),m("-",((r,t)=>t&&(r=A(r),t=A(t),e=>r(e)-t(e)))),d("+",140),m("+",((r,t)=>!t&&(r=A(r),t=>+r(t)))),d("-",140),m("-",((r,t)=>!t&&(r=A(r),t=>-r(t)))),c("+=",20,!0),m("+=",((r,t)=>(t=A(t),y(r,((r,e,l)=>r[e]+=t(l)))))),c("-=",20,!0),m("-=",((r,t)=>(t=A(t),y(r,((r,e,l)=>r[e]-=t(l)))))),p("++",150,(r=>r?["++",r,null]:["++",a(149)])),m("++",((r,t)=>y(r,null===t?(r,t)=>r[t]++:(r,t)=>++r[t]))),p("--",150,(r=>r?["--",r,null]:["--",a(149)])),m("--",((r,t)=>y(r,null===t?(r,t)=>r[t]--:(r,t)=>--r[t]))),d("~",140),m("~",((r,t)=>!t&&(r=A(r),t=>~r(t)))),c("|",50),m("|",((r,t)=>t&&(r=A(r),t=A(t),e=>r(e)|t(e)))),c("&",70),m("&",((r,t)=>t&&(r=A(r),t=A(t),e=>r(e)&t(e)))),c("^",60),m("^",((r,t)=>t&&(r=A(r),t=A(t),e=>r(e)^t(e)))),d("!",140),m("!",((r,t)=>!t&&(r=A(r),t=>!r(t)))),c("||",30),m("||",((r,t)=>(r=A(r),t=A(t),e=>r(e)||t(e)))),c("&&",40),m("&&",((r,t)=>(r=A(r),t=A(t),e=>r(e)&&t(e)))),c("==",80),m("==",((r,t)=>t&&(r=A(r),t=A(t),e=>r(e)==t(e)))),c("!=",80),m("!=",((r,t)=>t&&(r=A(r),t=A(t),e=>r(e)!=t(e)))),c(">",90),m(">",((r,t)=>t&&(r=A(r),t=A(t),e=>r(e)>t(e)))),c("<",90),m("<",((r,t)=>t&&(r=A(r),t=A(t),e=>r(e)<t(e)))),c(">=",90),m(">=",((r,t)=>t&&(r=A(r),t=A(t),e=>r(e)>=t(e)))),c("<=",90),m("<=",((r,t)=>t&&(r=A(r),t=A(t),e=>r(e)<=t(e)))),c(">>",100),m(">>",((r,t)=>t&&(r=A(r),t=A(t),e=>r(e)>>t(e)))),c("<<",100),m("<<",((r,t)=>t&&(r=A(r),t=A(t),e=>r(e)<<t(e)))),c(">>=",20,!0),m(">>=",((r,t)=>(t=A(t),prop(r,((r,e,l)=>r[e]>>=t(l)))))),c("<<=",20,!0),m("<<=",((r,t)=>(t=A(t),prop(r,((r,e,l)=>r[e]<<=t(l))))));var j=r=>A(e(r));p("/*",200,((e,l)=>(n((e=>42!==e&&47!==t.charCodeAt(r+1))),i(2),e||a(l)||[]))),p("//",200,((r,t)=>(n((r=>r>=32)),r||a(t)||[]))),c("**",130,!0),m("**",((r,t)=>t&&(r=A(r),t=A(t),e=>r(e)**t(e)))),p("?",20,((r,t,e)=>r&&(t=a(19))&&n((r=>58===r))&&["?",r,t,a(19)])),m("?",((r,t,e)=>(r=A(r),t=A(t),e=A(e),l=>r(l)?t(l):e(l)))),p("true",200,(r=>r?err():[,!0])),p("false",200,(r=>r?err():[,!1])),f("[]",200),m("[]",((r,t)=>void 0===t&&(r=(r=r?","===r[0]?r.slice(1):[r]:[]).map((r=>"..."===r[0]?(r=A(r[1]),t=>r(t)):(r=A(r),t=>[r(t)]))),t=>r.flatMap((r=>r(t)))))),f("{}",200),m("{}",((r,t)=>void 0===t&&(r=(r=r?","!==r[0]?[r]:r.slice(1):[]).map((r=>A("string"==typeof r?[":",r,r]:r))),t=>Object.fromEntries(r.flatMap((r=>r(t))))))),c(":",19,!0),m(":",((r,t)=>(t=A(t),Array.isArray(r)?(r=A(r),e=>[[r(e),t(e)]]):e=>[[r,t(e)]]))),c("=>",20,!0),m("=>",((r,t)=>(r=(r="()"===r[0]?r[1]:r)?r=","===r[0]?r.slice(1):[r]:[],t=A("{}"===t[0]?t[1]:t),(e=null)=>(e=Object.create(e),(...l)=>(r.map(((r,t)=>e[r]=l[t])),t(e)))))),c(""),p("?.",170,(r=>r&&["?.",r])),m("?.",(r=>(r=A(r),t=>r(t)||(()=>{})))),p("?.",170,((r,t)=>r&&!(t=a(170))?.map&&["?.",r,t])),m("?.",((r,t)=>t&&(r=A(r),e=>r(e)?.[t]))),m("()",((r,t,e,l,n,i)=>void 0!==t&&"?."===r[0]&&(r[2]||Array.isArray(r[1]))&&(l=t?","===t[0]?(t=t.slice(1).map(A),r=>t.map((t=>t(r)))):(t=A(t),r=>[t(r)]):()=>[],!r[2]&&(r=r[1]),n="[]"===r[0]&&3===r.length?A(r[2]):()=>r[2],e=A(r[1]),r=>e(r)?.[n(r)]?.(...l(r))))),d("...",140),m("...",(r=>(r=A(r),t=>Object.entries(r(t))))),c("in",90),m("in",((r,t)=>t&&(r=A(r),t=A(t),e=>r(e)in t(e)))),c("===",80),c("!==",9),m("===",((r,t)=>(r=A(r),t=A(t),e=>r(e)===t(e)))),m("!==",((r,t)=>(r=A(r),t=A(t),e=>r(e)!==t(e)))),c("??",30),m("??",((r,t)=>t&&(r=A(r),t=A(t),e=>r(e)??t(e)))),c("??=",20,!0),m("??=",((r,t)=>(t=A(t),y(r,((r,e,l)=>r[e]??=t(l)))))),c("||=",20,!0),m("||=",((r,t)=>(t=A(t),y(r,((r,e,l)=>r[e]||=t(l)))))),c("&&=",20,!0),m("&&=",((r,t)=>(t=A(t),y(r,((r,e,l)=>r[e]&&=t(l)))))),c(">>>",80),m(">>>",((r,t)=>(r=A(r),t=A(t),e=>r(e)>>>t(e)))),c(">>>=",20,!0),m(">>>=",((r,t)=>(t=A(t),y(r,((r,e,l)=>r[e]>>>=t(l)))))),p("undefined",20,(r=>r?l():[,void 0])),p("NaN",20,(r=>r?l():[,NaN])),p("null",20,(r=>r?l():[,null]));export{h as access,c as binary,A as compile,j as default,f as group,u as nary,m as operator,e as parse,N as stringify,p as token,d as unary};