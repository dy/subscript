let e,r,t=t=>(e=0,r=t,t=i(),r[e]?a():t||""),a=(t="Bad syntax",a=r.slice(0,e).split("\n"),s=a.pop())=>{let i=r.slice(e-108,e).split("\n").pop(),n=r.slice(e,e+108).split("\n").shift();throw EvalError(`${t} at ${a.length}:${s.length} \`${e>=108?"…":""}${i}▶${n}\``,"font-weight: bold")},s=(t=1,a=e,s)=>{if("number"==typeof t)e+=t;else for(;s=t(r.charCodeAt(e));)e+=s;return r.slice(a,e)},i=(r=0,s,i,n,o,p)=>{for(;(i=t.space())&&(o=((p=l[i])&&p(n,r))??(!n&&t.id()));)n=o;return s&&(i==s?e++:a()),n},n=e=>e>=48&&e<=57||e>=65&&e<=90||e>=97&&e<=122||36==e||95==e||e>=192&&215!=e&&247!=e;t.id=()=>s(n),t.space=t=>{for(;(t=r.charCodeAt(e))<=32;)e++;return t};let l=[],o=(t,a=32,s,i=t.charCodeAt(0),o=t.length,p=l[i],c=t.toUpperCase()!==t)=>l[i]=(i,l,d=e)=>l<a&&(o<2||r.substr(e,o)==t)&&(!c||!n(r.charCodeAt(e+o)))&&(e+=o,s(i,l))||(e=d,p?.(i,l)),p=(e,r,t=!1)=>o(e,r,((a,s)=>a&&(s=i(r-(t?.5:0)))&&[e,a,s])),c=(e,r,t)=>o(e,r,(a=>t?a&&[e,a]:!a&&(a=i(r-.5))&&[e,a])),d=(e,r)=>{o(e,r,((t,a)=>(a=i(r),(!t||t[0]!==e)&&(t=[e,t]),t.push(a),t)))},f=(e,r)=>o(e[0],r,(r=>!r&&[e,i(0,e.charCodeAt(1))])),m=(e,r)=>o(e[0],r,(r=>r&&[e[0],r,i(0,e.charCodeAt(1))]));const h=e=>Array.isArray(e)?e[0]?u[e[0]](...e.slice(1)):()=>e[1]:h.id(e);h.id=e=>r=>r?.[e];const u={},A=(e,r,t=u[e])=>u[e]=(...e)=>r(...e)||t&&t(...e),y=(e,r,t,s,i)=>"()"===e[0]?y(e[1],r,t):"string"==typeof e?t=>r(t,e,t):"."===e[0]?(s=h(e[1]),i=e[2],e=>r(s(e),i,e)):"["===e[0]?(s=h(e[1]),i=h(e[2]),e=>r(s(e),i(e),e)):t?(e=h(e),t=>r([e(t)],0,t)):()=>a("Bad left value"),b=e=>e?a():[,(e=+s((e=>46===e||e>=48&&e<=57||(69===e||101===e?2:0))))!=e?a():e];l[46]=e=>!e&&b();for(let e=48;e<=57;e++)l[e]=b;const C={n:"\n",r:"\r",t:"\t",b:"\b",f:"\f",v:"\v"},g=t=>(i,n,l="")=>{for(i&&a("Unexpected string"),s();(n=r.charCodeAt(e))-t;)92===n?(s(),n=s(),l+=C[n]||n):l+=s();return s()||a("Bad string"),[,l]};l[34]=g(34),l[39]=g(39),m("()",17),A("(",((e,r,t)=>(t=r?","===r[0]?(r=r.slice(1).map((e=>e?h(e):err())),e=>r.map((r=>r(e)))):(r=h(r),e=>[r(e)]):()=>[],y(e,((e,r,a)=>e[r](...t(a))),!0)))),m("[]",17),A("[",((e,r)=>r?(e=h(e),r=h(r),t=>e(t)[r(t)]):err())),p(".",17),A(".",((e,r)=>(e=h(e),r=r[0]?r:r[1],t=>e(t)[r]))),f("()",17),A("()",(e=>(!e&&a("Empty ()"),h(e))));const v=(...e)=>(e=e.map(h),r=>e.map((e=>e(r))).pop());d(",",1),A(",",v),d(";",1),A(";",v),p("*",12),A("*",((e,r)=>r&&(e=h(e),r=h(r),t=>e(t)*r(t)))),p("/",12),A("/",((e,r)=>r&&(e=h(e),r=h(r),t=>e(t)/r(t)))),p("%",12),A("%",((e,r)=>r&&(e=h(e),r=h(r),t=>e(t)%r(t)))),p("*=",2,!0),A("*=",((e,r)=>(r=h(r),y(e,((e,t,a)=>e[t]*=r(a)))))),p("/=",2,!0),A("/=",((e,r)=>(r=h(r),y(e,((e,t,a)=>e[t]/=r(a)))))),p("%=",2,!0),A("%=",((e,r)=>(r=h(r),y(e,((e,t,a)=>e[t]%=r(a)))))),c("+",14),A("+",((e,r)=>!r&&(e=h(e),r=>+e(r)))),c("-",14),A("-",((e,r)=>!r&&(e=h(e),r=>-e(r)))),p("+",11),A("+",((e,r)=>r&&(e=h(e),r=h(r),t=>e(t)+r(t)))),p("-",11),A("-",((e,r)=>r&&(e=h(e),r=h(r),t=>e(t)-r(t)))),p("+=",2,!0),A("+=",((e,r)=>(r=h(r),y(e,((e,t,a)=>e[t]+=r(a)))))),p("-=",2,!0),A("-=",((e,r)=>(r=h(r),y(e,((e,t,a)=>e[t]-=r(a)))))),o("++",15,(e=>e?["++-",e]:["++",i(14)])),A("++",(e=>y(e,((e,r,t)=>++e[r])))),A("++-",(e=>y(e,((e,r,t)=>e[r]++)))),o("--",15,(e=>e?["--+",e]:["--",i(14)])),A("--",(e=>y(e,((e,r,t)=>--e[r])))),A("--+",(e=>y(e,((e,r,t)=>e[r]--)))),c("~",14),A("~",((e,r)=>!r&&(e=h(e),r=>~e(r)))),p("|",5),A("|",((e,r)=>r&&(e=h(e),r=h(r),t=>e(t)|r(t)))),p("&",7),A("&",((e,r)=>r&&(e=h(e),r=h(r),t=>e(t)&r(t)))),p("^",6),A("^",((e,r)=>r&&(e=h(e),r=h(r),t=>e(t)^r(t)))),p(">>",10),A(">>",((e,r)=>r&&(e=h(e),r=h(r),t=>e(t)>>r(t)))),p("<<",10),A("<<",((e,r)=>r&&(e=h(e),r=h(r),t=>e(t)<<r(t)))),p("==",8),A("==",((e,r)=>r&&(e=h(e),r=h(r),t=>e(t)==r(t)))),p("!=",8),A("!=",((e,r)=>r&&(e=h(e),r=h(r),t=>e(t)!=r(t)))),p(">",9),A(">",((e,r)=>r&&(e=h(e),r=h(r),t=>e(t)>r(t)))),p("<",9),A("<",((e,r)=>r&&(e=h(e),r=h(r),t=>e(t)<r(t)))),p(">=",9),A(">=",((e,r)=>r&&(e=h(e),r=h(r),t=>e(t)>=r(t)))),p("<=",9),A("<=",((e,r)=>r&&(e=h(e),r=h(r),t=>e(t)<=r(t)))),c("!",14),A("!",((e,r)=>!r&&(e=h(e),r=>!e(r)))),p("||",3),A("||",((e,r)=>(e=h(e),r=h(r),t=>e(t)||r(t)))),p("&&",4),A("&&",((e,r)=>(e=h(e),r=h(r),t=>e(t)&&r(t)))),p("=",2,!0),A("=",((e,r)=>(r=h(r),y(e,((e,t,a)=>e[t]=r(a))))));var $=e=>h(t(e));o("/*",20,((t,a)=>(s((t=>42!==t&&47!==r.charCodeAt(e+1))),s(2),t||i(a)||[]))),o("//",20,((e,r)=>(s((e=>e>=32)),e||i(r)||[""]))),p("**",13,!0),A("**",((e,r)=>r&&(e=h(e),r=h(r),t=>e(t)**r(t)))),o("?",2,((e,r,t)=>e&&(r=i(2,58))&&["?",e,r,i(3)])),A("?",((e,r,t)=>(e=h(e),r=h(r),t=h(t),a=>e(a)?r(a):t(a)))),o("true",20,(e=>e?err():[,!0])),o("false",20,(e=>e?err():[,!1])),f("[]",20),A("[]",((e,r)=>e?","===e[0]?(e=e.slice(1).map(h),r=>e.map((e=>e(r)))):(e=h(e),r=>[e(r)]):()=>[])),f("{}",20),A("{}",((e,r)=>e?","===e[0]?(e=e.slice(1).map(h),r=>Object.fromEntries(e.map((e=>e(r))))):":"===e[0]?(e=h(e),r=>Object.fromEntries([e(r)])):(r=h(e),t=>({[e]:r(t)})):()=>({}))),p(":",2,!0),A(":",((e,r)=>(r=h(r),e=Array.isArray(e)?h(e):(e=>e).bind(0,e),t=>[e(t),r(t)]))),p("=>",2,!0),A("=>",((e,r)=>(e=(e="()"===e[0]?e[1]:e)?e=","===e[0]?e.slice(1):[e]:[],r=h("{}"===r[0]?r[1]:r),(t=null)=>(t=Object.create(t),(...a)=>(e.map(((e,r)=>t[e]=a[r])),r(t)))))),p(""),o("?.",17,(e=>e&&["?.",e])),A("?.",(e=>(e=h(e),r=>e(r)||(()=>{})))),o("?.",17,((e,r)=>e&&!(r=i(17))?.map&&["?.",e,r])),A("?.",((e,r)=>r&&(e=h(e),t=>e(t)?.[r]))),A("(",((e,r,t,a,s,i)=>"?."===e[0]&&(e[2]||Array.isArray(e[1]))&&(a=r?","===r[0]?(r=r.slice(1).map(h),e=>r.map((r=>r(e)))):(r=h(r),e=>[r(e)]):()=>[],!e[2]&&(e=e[1]),s="["===e[0]?h(e[2]):()=>e[2],t=h(e[1]),e=>t(e)?.[s(e)]?.(...a(e))))),p("in",9),A("in",((e,r)=>r&&(e=h(e),r=h(r),t=>e(t)in r(t)))),p("===",8),p("!==",9),A("===",((e,r)=>(e=h(e),r=h(r),t=>e(t)===r(t)))),A("===",((e,r)=>(e=h(e),r=h(r),t=>e(t)!==r(t)))),p("??",3),A("??",((e,r)=>r&&(e=h(e),r=h(r),t=>e(t)??r(t)))),p("??=",2,!0),A("??=",((e,r)=>(r=h(r),y(e,((e,t,a)=>e[t]??=r(a)))))),p("||=",2,!0),A("||=",((e,r)=>(r=h(r),y(e,((e,t,a)=>e[t]||=r(a)))))),p("&&=",2,!0),A("&&=",((e,r)=>(r=h(r),y(e,((e,t,a)=>e[t]&&=r(a)))))),o("undefined",20,(e=>e?a():[,void 0])),o("NaN",20,(e=>e?a():[,NaN])),o("null",20,(e=>e?a():[,null]));export{m as access,p as binary,h as compile,$ as default,f as group,l as lookup,d as nary,A as operator,t as parse,y as prop,o as token,c as unary};