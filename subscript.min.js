var e,r,t=(r="Bad syntax "+l())=>{throw Error(r+" at "+e)},a=(t=1,a=e)=>{if("number"==typeof t)e+=t;else for(;t(o());)e++;return a<e?r.slice(a,e):void 0},n=r=>{for(;(r=o())<=32;)e++;return r},o=(t=0)=>r.charCodeAt(e+t),l=(t=1)=>r.substr(e,t),u=(r=0,t,a=n(),o,l=e,u=0,s)=>{for(;l===e&&u<i.length;)o=i[u++](a);for(u=Math.max(0|c[a=n()],r);u<f.length&&!(a===t||u<r);)(s=f[u++](o,a,u,t))&&(o=s,u=Math.max(0|c[a=n()],r));return o},s=e=>a((e=>e>=48&&e<=57||e>=65&&e<=90||e>=97&&e<=122||36==e||95==e||e>=192)),i=[e=>{if(e=a((e=>e>47&&e<58||46===e)))return(69===o()||101===o())&&(e+=a(2)+a((e=>e>=48&&e<=57))),isNaN(e=parseFloat(e))?t("Bad number"):e},(r,t)=>40===r&&(e++,t=u(0,41),e++,t),(r,t)=>34===r&&(t=l(),e++,t+a((e=>e-r))+(e++,t)),s],f=[(e,r,t,o)=>{if(44===r){e=[",",e];do{a(),e.push(u(t,o))}while(44===n());return e}},(e,r,t,n)=>124===r&&o(1)===r&&[a(2),e,u(t,n)],(e,r,t,n)=>38===r&&o(1)===r&&[a(2),e,u(t,n)],(e,r,t,n)=>124===r&&[a(),e,u(t,n)],(e,r,t,n)=>94===r&&[a(),e,u(t,n)],(e,r,t,n)=>38===r&&[a(),e,u(t,n)],(e,r,t,n)=>61===o(1)&&(61===r||33===r)&&[a(2),e,u(t,n)],(e,r,t,n)=>(62===r||60===r)&&r!==o(1)&&[a(),e,u(t,n)],(e,r,t,n)=>(60===r||62===r)&&r===o(1)&&[a(r===o(2)?3:2),e,u(t,n)],(e,r,t,n)=>(43===r||45===r)&&null!=e&&o(1)!==r&&[a(),e,u(t,n)],(e,r,t,n)=>(42===r&&42!==o(1)||47===r||37===r)&&[a(),e,u(t,n)],(e,r,t,n)=>(43===r||45===r)&&o(1)===r&&[a(2),e??u(t-1,n)],(e,r,t,n)=>(43===r||45===r||33===r)&&null==e&&[a(1),u(t-1,n)],(r,t,o,l)=>46===t?[a(),r,'"'+(n(),s()+'"')]:91===t?(e++,r=[".",r,u(0,93)],e++,r):40===t?(e++,l=u(0,41),e++,Array.isArray(l)&&","===l[0]?(l[0]=r,l):null==l?[r]:[r,l]):null],c=[];c[44]=0,c[124]=1,c[38]=2,c[94]=4,c[61]=c[33]=6,c[60]=c[62]=7,c[43]=c[45]=9,c[42]=c[47]=c[37]=10,c[46]=c[91]=c[40]=13;var d=(a,n)=>(r=a,e=0,n=u(),e<r.length?t():n),p=e=>Array.isArray(e)&&("string"==typeof e[0]||p(e[0])),y=(e,r={},t,a)=>p(e)?("string"==typeof(t=e[0])&&(a=h[t]),"function"!=typeof(t=a||y(t,r))?t:t.call(...e.map((e=>y(e,r))))):e&&"string"==typeof e?'"'===e[0]?e.slice(1,-1):"@"===e[0]?e.slice(1):e in r?r[e]:e:e,h=y.operator={"!":e=>!e,"++":e=>++e,"--":e=>--e,".":(...e)=>e.reduce(((e,r)=>e&&e[r])),"%":(...e)=>e.reduce(((e,r)=>e%r)),"/":(...e)=>e.reduce(((e,r)=>e/r)),"*":(...e)=>e.reduce(((e,r)=>e*r)),"+":(...e)=>e.reduce(((e,r)=>e+r)),"-":(...e)=>e.length<2?-e:e.reduce(((e,r)=>e-r)),">>>":(e,r)=>e>>>r,">>":(e,r)=>e>>r,"<<":(e,r)=>e<<r,">=":(e,r)=>e>=r,">":(e,r)=>e>r,"<=":(e,r)=>e<=r,"<":(e,r)=>e<r,"!=":(e,r)=>e!=r,"==":(e,r)=>e==r,"&":(e,r)=>e&r,"^":(e,r)=>e^r,"|":(e,r)=>e|r,"&&":(...e)=>e.every(Boolean),"||":(...e)=>e.some(Boolean),",":(...e)=>e.reduce(((e,r)=>r))},g=y,m=e=>(e="string"==typeof e?d(e):e,r=>g(e,r));export{m as default,g as evaluate,d as parse};