let r,e,t=(t,...a)=>(e=t.raw?String.raw(t,...a):t,r=0,!(t=g())||r<e.length?l():r=>t(r||{})),a=r=>r>=48&&r<=57||r>=65&&r<=90||r>=97&&r<=122||36==r||95==r||r>=192&&215!=r&&247!=r,l=(t="Bad syntax")=>{throw Error(t+" `"+e[r]+"` at "+r)},n=(t=1,a=r,l)=>{if("number"==typeof t)r+=t;else if(l=t.trim&&t.length)r+=s(l)==t?l:0;else for(;t(o());)r++;return e.slice(a,r)},o=(t=0)=>e.charCodeAt(r+t),s=(t=1)=>e.substr(r,t),g=(e=0,a,n,o,s,g,p)=>{for(;(n=t.space())&&(s=(g=i[n])&&g(o,e)||!o&&(h(n)||f(n)||l()));)o=s;return a&&(n!=a?l("Unclosed paren"):r++),o};t.space=e=>{for(;(e=o())<=32;)r++;return e};let p=t.literal=[],h=(e,t=0,a,l=r)=>{for(;t<p.length;)if(a=p[t++](e),r>l)return()=>a},f=t.id=(r,e=n(a),t=(e?r=>r[e]:()=>d))=>(t._=e,t),i=[],u=t.operator=(e,t=0,l=0,n,p=e.map&&u(e[1],(e=e[0],0)),h=e.charCodeAt(0),f=e.length,d=l&&i[h],c=l.length,_=e.toUpperCase()!==e)=>(n=c>1?(e,a)=>e&&(r+=f,a=g(p?0:t,p),e.length||a.length?r=>l(e(r),a(r),e._,a._):(e=l(e(),a(),e._,a._),()=>e)):c?e=>e&&(r+=f,r=>l(e(r),e._)):e=>!e&&(r+=f,e=g(p?0:t-1,p),r=>l(e(r),e._)),i[h]=(r,l)=>l<t&&(f<2||s(f)==e)&&(!_||!a(o(f)))&&n(r)||d&&d(r,l),h),d=[];t.literal.push((r=>(r=n((r=>r>47&&r<58||46==r)))&&((69==o()||101==o())&&(r+=n(2)+n((r=>r>=48&&r<=57))),(r=+r)!=r?l("Bad number"):r)),((r,e,t)=>34==r&&(n(),t=n((e=>e-r)),n()||l("Unclosed string"),t)));for(let r,e=0,a=[",",1,(e,t,a,l)=>(e=(r=>r&&r.args?r:(r=r===d?[,]:[r]).args=r)(e)).push(""===l?r:t)&&e,"|",6,(r,e)=>r|e,"||",4,(r,e)=>r||e,"&",8,(r,e)=>r&e,"&&",5,(r,e)=>r&&e,"^",7,(r,e)=>r^e,"==",9,(r,e)=>r==e,"!=",9,(r,e)=>r!=e,">",10,(r,e)=>r>e,">=",10,(r,e)=>r>=e,">>",11,(r,e)=>r>>e,">>>",11,(r,e)=>r>>>e,"<",10,(r,e)=>r<e,"<=",10,(r,e)=>r<=e,"<<",11,(r,e)=>r<<e,"+",12,(r,e)=>r+e,"+",15,(e=r)=>+e,"++",15,(e=r)=>++e,"++",16,r=>r++,"-",12,(r,e)=>r-e,"-",15,(e=r)=>-e,"--",15,(e=r)=>--e,"--",16,r=>r++,"!",15,(e=r)=>!e,"*",13,(r,e)=>r*e,"/",13,(r,e)=>r/e,"%",13,(r,e)=>r%e,["[","]"],18,(r,e)=>r[e],".",18,(r,e,t,a)=>r[a||e],["(",")"],18,(r,e)=>e&&e.args?r(...e):r(e),["(",")"],19,(e=r)=>e&&e.args?e.pop():e];e<a.length;)t.operator(a[e++],a[e++],a[e++]);export{t as default};